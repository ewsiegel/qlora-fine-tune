Created Date,Folders,ID,Subject,Question,Instructor Answers,Student Answers
2024-11-26T20:29:39Z,"project, logistics",185,Poster Presentation Schedule &amp; Rubrics,"<md>Dear 6.9540 EfficientML Course Students,

We are excited to announce that the poster presentation dates have been scheduled! You can find your assigned presentation date on the following Google Sheet:  
[Google Sheet Link](https://docs.google.com/spreadsheets/d/1eeXoxVxtHcEjw8BqiVRpaFAMeQFTnpBT3rKv2LbJQ6w/edit?usp=sharing).

### Grading Rubric for Final Projects

Your final project will be evaluated based on the following criteria, each contributing 10 points to your overall grade (70 points in total):

*   **Motivation**: 10 pts
*   **Technical Soundness**: 10 pts
*   **Novelty**: 10 pts
*   **Evaluation**: 10 pts
*   **Poster**: 10 pts
*   **Written Report**: 10 pts
*   **Open Source / Demo**: 10 pts

Each project will be independently scored by **three TAs**, and your final grade will be the average of these scores.

### Poster Presentation Guidelines

To ensure a smooth and successful presentation, please follow these guidelines:

1.  Prepare a **printed version of your poster**, with dimensions no larger than **36x48 inches**. Posters printed across multiple **letter/A4-sized pages** are acceptable, though be prepared for extra taping.
2.  Every team member is required to **attend the poster presentation**. However, when presenting to the TAs, it is acceptable for only one member to present on behalf of the team.
3.  Your **presentation and poster must clearly indicate each team member's contribution** to the project.

We will provide poster boards and easels for the event, but you are responsible for printing your poster.

Thank you for your cooperation, and we look forward to seeing your incredible projects! If you have any questions, please don’t hesitate to contact us.</md>",No instructor answer,No student answer
2024-10-29T23:40:32Z,other,109,WorldModelBench Annotation Competition: Sharpen AI&#39;s Understanding of the Physical World!,"<md>Dear Students,

We’re excited to announce an engaging opportunity for you to directly contribute to cutting-edge AI research in our course. As you know, high-quality human judgment is invaluable in developing robust AI models, and **WorldModelBench**—a novel benchmark for evaluating video generation models—needs your insights!

### **About WorldModelBench**

WorldModelBench is designed to test whether today’s leading video generation models can truly simulate realistic environments. Although promising, these models frequently fall short, often defying basic physics (think objects levitating or liquids defying gravity) and missing commonsense logic. We’re looking to you to evaluate these generated videos, helping to identify areas for improvement.

### **What You’ll Do**

As annotators, you’ll review video samples and assess them based on:

*   **Instruction Following** (0–3)
*   **Commonsense Adherence** (0–2)
*   **Physics Adherence** (0–5)

Each video is accompanied by a textual instruction and, occasionally, a conditional image frame. Your task is to evaluate how well the generated video aligns with the provided guidance and whether it adheres to commonsense and basic physical laws.

**Detailed instructions can be found here:** [Annotation Guide](https://docs.google.com/document/d/1kOirJAAU-g7CwrI7NtfJy6hYsiU0VChGJivr7_-b860/edit?usp=sharing)

### **How to Participate**

1.  **Go to** [worldmodelbench.hanlab.ai](https://worldmodelbench.hanlab.ai).
2.  **Annotate videos** by scoring each category.
3.  **Important**: Please log in using your MIT email to track your contributions.

### **Rewards for Top Annotators**

To acknowledge your efforts, we’ll be rewarding top annotators (based on the quantity and quality of annotations):

*   **1st Place**: Jetson Orin Nano
*   **2nd–3rd Place**: Qualcomm Snapdragon Development Board
*   **4th–6th Place**: STM32 TinyML Development Board

### **Timeline**

*   **Competition Start**: October 29, 2024, 5 PM ET
*   **Competition End**: November 4, 2024, 11:59 PM ET
*   **Awards Announcement**: Tuesday in class

Dive in, and let’s collaboratively elevate the capabilities of AI video generation. Thank you in advance for your enthusiasm and insights!</md>",No instructor answer,No student answer
2024-09-05T21:39:58Z,logistics,9,Important: Prerequisite Enforcement for Course 6.5940 TinyML and Efficient Deep Learning Computing,"<md>Dear Students,

As we prepare for the new semester, we would like to inform you about the strict enforcement of prerequisites for 6.5940 TinyML and Efficient Deep Learning Computing: 

+ **6.191 Computation Structures _and_ 6.390 Intro to Machine Learning**;
+ Students who don't fulfill the prerequisites will be **de-registered in the second week** of class. 

If you believe you have equivalent prior experience (e.g., a computer architecture course taken during your undergraduate studies at another institution), you may petition for consideration. Please submit your [Petition Form](https://docs.google.com/forms/d/1gkESVTUXDmW-skKDJFELq3OTKdHo2Z_AOdPVv0vOwvk) by Sept. 6, 2024, 11:59:59 PM EST.

You can optionally upload related materials, such as transcripts, in the Petition Form. This will increase the chances of our approval of your petition. If you have already submitted the petition form and want to attach new materials, you can submit it again.

Thank you for your attention to this matter.</md>",No instructor answer,No student answer
2024-11-27T18:13:53Z,project,188,Is poster really necessary?,Can we just use our laptop to present the poster? ,No instructor answer,No student answer
2024-11-27T04:45:38Z,"project, logistics",187,Due date for paper,"<p>Hello,</p>
<p></p>
<p>I just wanted to clarify that the final project paper is due on December 10th right? Only the poster presentation is due on the assigned date (next week)?</p>
<p></p>
<p>Thanks!</p>",No instructor answer,"On the website it says Saturday 12/14, should it not be then?"
2024-11-26T17:43:42Z,project,184,Poster Presentation Clarifications,"What is the expectation for the poster presentation, in terms of the poster itself (actual physical poster?) and length/content of presentation? What should the report look like?/Do you have an example from previous years we can look at?","<md>Hi,

A printed version of the poster is required during the presentation, with dimensions no larger than 36x48 inches. Posters printed across multiple letter/A4-sized pages are acceptable, though be prepared for extra taping.

The written report should use the NeurIPS template which you can download [here](https://neurips.cc/Conferences/2024/CallForPapers).</md>",No student answer
2024-11-26T17:35:40Z,project,183,Project 4 Expectations?,"We&#39;re a little confused at the technical scope of project 4. Is there an expectation to modify the actual architecture of tinyengine, or if we have enough scope (extending from binary classification, modifying training, etc.) around the existing model, is that sufficient? https://docs.google.com/document/d/1QiCkCUr_1DnLNUCXUM3g0SQRIbVG5XyrQjdfsUPrIeA/edit?tab=t.0","<md>Hi,

It’s completely fine to use TinyEngine as an MCU deployment tool for your on-device training project.It is totally fine to use the tinyengine as a MCU deployment tool for your on-device training project.</md>",No student answer
2024-11-24T01:54:18Z,project,181,W4A8 Explanation,"<md>Reading through the AWQ and SmoothQuant papers, I understand how W4A16 works and how W8A8 works. However, in Lab 5 and in other readings, I've seen a jump from those two methods to also having W4A8. Reading the QServe paper, they also have a W4A8 implementation. Can someone explain how this works? Do they essentially apply SmoothQuant first to get weights and activations to INT8, and then apply AWQ to get weights to INT4? How does it work in the TinyChatEngine like the one we implemented in Lab 5?</md>",No instructor answer,No student answer
2024-11-23T04:49:20Z,other,179,Quantization of gradient with residual,"If we keep a residual of the gradient after quantizing it, does this not defeat the purpose of quantization? On slide 57 of lecture of distributed training (II), it seems that keeping the residual will take up as much memory as the actual gradient.",No instructor answer,No student answer
2024-11-22T22:17:49Z,project,178,Action Required: Team Information &amp; Blackout Date for Poster Presentation,"<md>Dear 6.9540 EfficientML Course Students,

I hope this email finds you well. As part of the preparation for the poster presentation, we kindly ask each team to provide the following information:

- Team Members: List the names of all members in your team.
- Blackout Date: Indicate the single date your team is unavailable for the poster presentation.

Please note:
- Only one representative from each team needs to fill out the sheet on behalf of the entire team.
- Each team is allowed only one blackout date. For any special cases, please email us directly.
- Ensure the information is accurate and submitted by November 26.

You can access the sheet here: [Google Sheet Link](https://docs.google.com/spreadsheets/d/1T4nQB4gdK-hF6QLKgfmmz\_wnYvVyWVc2L954XUjceD4/edit?usp=sharing).

Thank you for your prompt attention to this matter. If you have any questions, please don’t hesitate to reach out.

Best wishes,

MIT EfficientML Course Staff</md>",No instructor answer,No student answer
2024-11-22T01:13:08Z,project,177,Final Project Schedule Inquiry,How would we schedule our final project presentation? I see that there are three days allotted for final project presentations,"<md>Hi,

We will assign presentation dates to ensure an even distribution of students across all dates. Please use the provided Google Sheet to indicate which date is unavailable for your team.

Important details:
- Only one representative per team should complete the sheet on behalf of the entire team.
- Each team may select only one blackout date.
- For special cases or exceptions, please contact us directly via email.
- Make sure the information is accurate and submitted by November 26.
Access the sheet here: [Google Sheet Link](https://docs.google.com/spreadsheets/d/1T4nQB4gdK-hF6QLKgfmmz_wnYvVyWVc2L954XUjceD4/edit?usp=sharing).

Thank you!</md>",No student answer
2024-11-20T21:38:38Z,project,175,DuoAttention Sink Tokens,"<p>In the DuoAttention paper, it&#39;s mentioned that &#34;The identification process uses 128 sink tokens and 256 recent tokens.&#34;</p>
<p></p>
<p>In other cases, I believe it was mentioned that 4 sink tokens are usually sufficient – I was wondering if there was any particular reason to use 128 sink tokens &#43; 256 recent tokens during the $$\alpha$$-tuning process.</p>
<p></p>
<p>Thanks!</p>","<md>The reason for using 128 sink tokens and 256 recent tokens is due to the block sparse implementation of the streaming attention. Each block consists of 128 tokens, so during the process, we allocated one block for the sink tokens and two blocks for the recent tokens. This corresponds to 128 sink tokens and 256 recent tokens.</md>",No student answer
2024-11-14T20:40:03Z,project,171,Project partners?,"<md>I'm an Meng student looking for project partners! I'm particularly interested in on-device training, but am open to other topics. Reach out to me at birdy@mit.edu if you still need a team!</md>",No instructor answer,No student answer
2024-11-14T19:47:50Z,project,170,Any Guidelines on Project Proposal?,"<p>^ Title</p>
<p></p>
<p>Also, if we select project from ideas list, do we just mention which project we want to do</p>",No instructor answer,No student answer
2024-11-14T18:01:12Z,project,169,Looking for 1-2 Group Members,"Hi, two MEng students and I are looking for one-two others to join our group! Please let me know if you are interested by emailing sbhuiyan@mit.edu, thanks!",No instructor answer,No student answer
2024-11-14T14:45:07Z,project,168,Strictness of project page count,"<p>Hello, I just wanted to ask how strictly you&#39;re enforcing the 1-2 page limit on the project proposal. Is that a general guideline or really a requirement? Is it ok to have a proposal approaching 3 pages?</p>
<p></p>
<p>Thanks!</p>",We don&#39;t have a hard page limit on the project proposal. 1-2 pages is a general recommendation. Feel free to add more pages if you need.,No student answer
2024-11-14T02:24:57Z,lab5,167,[pset5] dyld[33401]: Symbol not found,"<md>Having followed @146 and @161, I reinstalled xcode command line tools, deactivated the conda environment, and still get this error. 

```
% ./evaluate.sh reference
dyld[33401]: Symbol not found: __ZNSt3__117bad_function_callD1Ev
  Referenced from: /Users/birdy/Documents/Meng Classes/tinyML/pset5/tinychat-tutorial/transformer/test_linear
  Expected in: /usr/lib/libc++.1.dylib
./evaluate.sh: line 34: 33401 Abort trap: 6           ./test_linear

All tests completed!
```

System info: 
```
% clang++ --version
Apple clang version 13.1.6 (clang-1316.0.21.2.5)
Target: arm64-apple-darwin21.3.0
Thread model: posix
InstalledDir: /Library/Developer/CommandLineTools/usr/bin

% uname -m
arm64
```

Has anyone else run into this? Any suggestions on how to fix it?</md>","<p>Did you try reinstalling homebrew and llvm (using homebrew)?</p>
<p></p>
<p>(also try upgrading mac os system if possible)</p>",<md>any updates on this? I have the same error lol.</md>
2024-11-13T21:08:59Z,project,166,Project Partner Request,"Hi! We’re Clay Coleman and Kenny Chen, two Harvard grad students with engineering backgrounds in industry in spatial AI and CV. We’re looking for partners to work on project(s) 4: On-device training or 5: MCUNet. Reply here or reach out to us at <a href=""mailto:ccoleman@g.harvard.edu"" target=""_blank"" rel=""noopener noreferrer"">ccoleman@g.harvard.edu</a> and <a href=""mailto:kennethchen@g.harvard.edu"" target=""_blank"" rel=""noopener noreferrer"">kennethchen@g.harvard.edu</a> if you&#39;re interested!",No instructor answer,No student answer
2024-11-13T19:38:51Z,project,165,Can late days be used on the project proposal?,eom,No instructor answer,No student answer
2024-11-13T18:54:58Z,lab5,164,Error running ./evaluate - (unknown target CPU &#39;armv8.2-a&#43;dotprod&#39;),"<md>Receiving into this error message whenever I run ./evaluate.sh 

Any guidance on how to solve? I have an M1 Mac and downloaded the QM_ARM model.
```
error: unknown target CPU 'armv8.2-a+dotprod'
note: valid target CPU values are: nocona, core2, penryn, bonnell, atom, silvermont, slm, goldmont, goldmont-plus, tremont, nehalem, corei7, westmere, sandybridge, corei7-avx, ivybridge, core-avx-i, haswell, core-avx2, broadwell, skylake, skylake-avx512, skx, cascadelake, cooperlake, cannonlake, icelake-client, rocketlake, icelake-server, tigerlake, sapphirerapids, alderlake, raptorlake, meteorlake, arrowlake, arrowlake-s, lunarlake, gracemont, pantherlake, sierraforest, grandridge, graniterapids, graniterapids-d, emeraldrapids, clearwaterforest, knl, knm, k8, athlon64, athlon-fx, opteron, k8-sse3, athlon64-sse3, opteron-sse3, amdfam10, barcelona, btver1, btver2, bdver1, bdver2, bdver3, bdver4, znver1, znver2, znver3, znver4, znver5, x86-64, x86-64-v2, x86-64-v3, x86-64-v4
make: *** [build/transformer/src/ops/BMM_S8T_S8N_F32T.o] Error 1
make: *** Waiting for unfinished jobs....
error: unknown target CPU 'armv8.2-a+dotprod'
note: valid target CPU values are: nocona, core2, penryn, bonnell, atom, silvermont, slm, goldmont, goldmont-plus, tremont, nehalem, corei7, westmere, sandybridge, corei7-avx, ivybridge, core-avx-i, haswell, core-avx2, broadwell, skylake, skylake-avx512, skx, cascadelake, cooperlake, cannonlake, icelake-client, rocketlake, icelake-server, tigerlake, sapphirerapids, alderlake, raptorlake, meteorlake, arrowlake, arrowlake-s, lunarlake, gracemont, pantherlake, sierraforest, grandridge, graniterapids, graniterapids-d, emeraldrapids, clearwaterforest, knl, knm, k8, athlon64, athlon-fx, opteron, k8-sse3, athlon64-sse3, opteron-sse3, amdfam10, barcelona, btver1, btver2, bdver1, bdver2, bdver3, bdver4, znver1, znver2, znver3, znver4, znver5, x86-64, x86-64-v2, x86-64-v3, x86-64-v4
error: unknown target CPU 'armv8.2-a+dotprod'
note: valid target CPU values are: nocona, core2, penryn, bonnell, atom, silvermont, slm, goldmont, goldmont-plus, tremont, nehalem, corei7, westmere, sandybridge, corei7-avx, ivybridge, core-avx-i, haswell, core-avx2, broadwell, skylake, skylake-avx512, skx, cascadelake, cooperlake, cannonlake, icelake-client, rocketlake, icelake-server, tigerlake, sapphirerapids, alderlake, raptorlake, meteorlake, arrowlake, arrowlake-s, lunarlake, gracemont, pantherlake, sierraforest, grandridge, graniterapids, graniterapids-d, emeraldrapids, clearwaterforest, knl, knm, k8, athlon64, athlon-fx, opteron, k8-sse3, athlon64-sse3, opteron-sse3, amdfam10, barcelona, btver1, btver2, bdver1, bdver2, bdver3, bdver4, znver1, znver2, znver3, znver4, znver5, x86-64, x86-64-v2, x86-64-v3, x86-64-v4
make: *** [build/transformer/src/OPTTokenizer.o] Error 1
make: *** [build/transformer/src/nn_modules/Fp32llamaDecoder.o] Error 1
error: unknown target CPU 'armv8.2-a+dotprod'
note: valid target CPU values are: nocona, core2, penryn, bonnell, atom, silvermont, slm, goldmont, goldmont-plus, tremont, nehalem, corei7, westmere, sandybridge, corei7-avx, ivybridge, core-avx-i, haswell, core-avx2, broadwell, skylake, skylake-avx512, skx, cascadelake, cooperlake, cannonlake, icelake-client, rocketlake, icelake-server, tigerlake, sapphirerapids, alderlake, raptorlake, meteorlake, arrowlake, arrowlake-s, lunarlake, gracemont, pantherlake, sierraforest, grandridge, graniterapids, graniterapids-d, emeraldrapids, clearwaterforest, knl, knm, k8, athlon64, athlon-fx, opteron, k8-sse3, athlon64-sse3, opteron-sse3, amdfam10, barcelona, btver1, btver2, bdver1, bdver2, bdver3, bdver4, znver1, znver2, znver3, znver4, znver5, x86-64, x86-64-v2, x86-64-v3, x86-64-v4
make: *** [build/transformer/src/LLaMAGenerate.o] Error 1
error: unknown target CPU 'armv8.2-a+dotprod'
note: valid target CPU values are: nocona, core2, penryn, bonnell, atom, silvermont, slm, goldmont, goldmont-plus, tremont, nehalem, corei7, westmere, sandybridge, corei7-avx, ivybridge, core-avx-i, haswell, core-avx2, broadwell, skylake, skylake-avx512, skx, cascadelake, cooperlake, cannonlake, icelake-client, rocketlake, icelake-server, tigerlake, sapphirerapids, alderlake, raptorlake, meteorlake, arrowlake, arrowlake-s, lunarlake, gracemont, pantherlake, sierraforest, grandridge, graniterapids, graniterapids-d, emeraldrapids, clearwaterforest, knl, knm, k8, athlon64, athlon-fx, opteron, k8-sse3, athlon64-sse3, opteron-sse3, amdfam10, barcelona, btver1, btver2, bdver1, bdver2, bdver3, bdver4, znver1, znver2, znver3, znver4, znver5, x86-64, x86-64-v2, x86-64-v3, x86-64-v4
make: *** [build/transformer/src/nn_modules/Int4llamaAttention.o] Error 1
```</md>","<p>Looks like your compiler is targeting x86. Could you check your architecture using</p>
<pre>
 uname -m</pre>
<p>and the target of your compiler using</p>
<pre>
clang&#43;&#43; --version</pre>
<p></p>
<p>Someone reported they opened their terminal using Rosetta, which basically emulated an x86 environment for you. Please avoid that if possible.</p>",No student answer
2024-11-13T04:43:57Z,lab5,163,Errror with ./evaluate,"<p>I&#39;m trying to run the first thing to check the dependencies but getting the following error. Homebrew seemed to have installed successfully. I&#39;m running on an M3 Mac. </p>
<p></p>
<pre>
make: /opt/homebrew/opt/llvm/bin/clang&#43;&#43;: No such file or directory
make: /opt/homebrew/opt/llvm/bin/clang&#43;&#43;: No such file or directory
make: /opt/homebrew/opt/llvm/bin/clang&#43;&#43;: No such file or directory
make: /opt/homebrew/opt/llvm/bin/clang&#43;&#43;: No such file or directory
make: /opt/homebrew/opt/llvm/bin/clang&#43;&#43;: No such file or directory
make: *** [build/transformer/src/LLaMAGenerate.o] Error 1
make: *** Waiting for unfinished jobs....
make: *** [build/transformer/src/OPTGenerate.o] Error 1
make: *** [build/transformer/src/OPTTokenizer.o] Error 1
make: *** [build/transformer/src/LLaMATokenizer.o] Error 1
make: *** [build/transformer/src/Generate.o] Error 1
make: /opt/homebrew/opt/llvm/bin/clang&#43;&#43;: No such file or directory
make: /opt/homebrew/opt/llvm/bin/clang&#43;&#43;: No such file or directory
make: *** [build/transformer/src/utils.o] Error 1
make: *** [build/transformer/src/nn_modules/Fp32llamaAttention.o] Error 1
Compilation failed!</pre>",No instructor answer,"<p>Try</p>
<pre>
<code>brew update
brew install llvm</code></pre>
<p></p>"
2024-11-13T04:00:34Z,lab5,162,Can&#39;t optimize TinyChatEngine on ARM Mac,"I can&#39;t run TinyChatEngine on my ARM Mac, will the staff provide a way for MacOS users to run TinyChatEngine so that we can do the bonus problem?",See my answer here: https://piazza.com/class/m05fat1q3i87bn/post/147,No student answer
2024-11-13T03:43:56Z,lab5,161,Lab 5: can&#39;t run ./evaluate.sh reference,"<p>followed @146 &#39;s example and re-installed Xcode command line tools but I am still getting the following error. I have an M3 for context. Has anyone run into this issue?</p>
<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fk02pxy6ui204ed%2Ff84e97cb4e72ed01a718899c8d67808299f2381ebe3dc46eb708419b8fc52646%2Fimage.png"" alt=""image.pngNaN"" /></p>",No instructor answer,"I also ran on m3 and did not have any issue. Seems to be anaconda and Xcode compatibility issue: <a href=""https://stackoverflow.com/questions/63592445/ld-unsupported-tapi-file-type-tapi-tbd-in-yaml-file"">https://stackoverflow.com/questions/63592445/ld-unsupported-tapi-file-type-tapi-tbd-in-yaml-file</a>"
2024-11-13T03:14:30Z,lab5,160,How to generate git patch?,"<p>Used git diff &gt; ddd.patch and it generates a 130 thousand line long patch which I assume is incorrect.</p>
<p></p>
<p>How can you generate the patch?</p>","The command is correct. If you really cannot generate a patch you could submit a zip file of your folder (you may exclude transformer/INT4, which is the downloaded weight) and make a note of that.","I did a similar command, and it worked for me."
2024-11-13T02:18:53Z,lab5,159,int8_t has not been declared??,"<p>Hi, trying to test out the basic reference file. Getting the below error:</p>
<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fktb0nxlly1k4nx%2Fea6d1b2fe47d14e3eb993ee8e51c2376f2ab836bf5c82146017da8e0e464cd02%2Fimage.png"" alt=""image.png"" /></p>
<p></p>
<p>Using MSYS2 on Windows with mingw.</p>
<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fktb0nxlly1k4nx%2Fab2e0a3531d57ffafe7af03e2b75b3e24ee70a711dd98f65c91da328274f070b%2Fimage.png"" alt=""image.png"" /></p>
<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fktb0nxlly1k4nx%2F4ed60f3c832214dfea2f37dadb95269671c0c6dc9c0d4070093e2902f3bfe4b3%2Fimage.png"" alt=""image.png"" /></p>
<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fktb0nxlly1k4nx%2F206a97dc4f9ba7fba289a90036791b7efc192a57e89e302303860af363148e20%2Fimage.png"" alt=""image.png"" /></p>
<p>What could be causing this?</p>",No instructor answer,RESOLVED- other questions were not very specific with title lol.
2024-11-13T01:03:54Z,lab5,157,simd error for ARM,"./kernels/starter_code/simd_programming.cc:94:28: error: always_inline function &#39;vdotq_s32&#39; requires target feature &#39;dotprod&#39;, but would be inlined into function &#39;mat_mul_simd_programming&#39; that is compiled without support for &#39;dotprod&#39;<br />   94 |                 int_sum0 = vdotq_s32(int_sum0, a0, lower_half);<br />      |                            ^<br /><br /><br />Hello, I got this weird error when trying to run the SIMD optimization. the line of code that it fails on is above, does anyone know what is going on here?",No instructor answer,<md>See @112</md>
2024-11-13T00:28:06Z,project,156,Where to submit project proposal?,"<p>Where can we submit the final project proposal?</p>
<p></p>
<p>Apologies if it&#39;s already posted. I haven&#39;t found any instruction so far.</p>",No instructor answer,"<p>it&#39;s on canvas <a href=""https://canvas.mit.edu/courses/28126/assignments/369095"" target=""_blank"" rel=""noopener noreferrer"">here</a></p>
<p></p>
<p>https://canvas.mit.edu/courses/28126/assignments/369095</p>"
2024-11-12T23:57:01Z,project,155,Two people looking for a team,"<md>Hello!

A classmate and I are looking for a team, if anyone is looking for two people, or possibly looking to join? We're interested in computer vision models (segmentation, etc.) & LLMs!</md>",No instructor answer,No student answer
2024-11-12T01:38:23Z,logistics,152,Can late days be broken up into multiple assignments?,"<p>Dear instructors,</p>
<p></p>
<p>I am wondering if our late days can be divided into multiple assignments or can only be used for one single assignment. I wasn&#39;t sure from reading your logistics section on the course website.</p>
<p></p>
<p>Thanks so much!</p>","<md>Hi,

Late days can be used for multiple assignments but we will accumulate the late days. The total allowed late days are 6 days.</md>",No student answer
2024-11-11T20:23:12Z,lab5,151,Is LLaMA_7B_2_chat used anywhere?,I feel like the `LLaMA_7B_2_chat` model was downloaded but never used. Am I missing anything? Just want to make sure. ,The weights in the downloaded model will be used to test your code. See test_linear.cc line 23.,No student answer
2024-11-11T17:03:27Z,project,150,Project proposal,"Are there any guidelines for the project proposal due this Thursday? What should it contain, and are there any samples we can refer to? Also, where do we turn in the assignment?",No instructor answer,any update on this?
2024-11-11T16:01:33Z,project,149,Project Collaboration Request,Is there anyone interested in doing work on the DuoAttention project that is still not grouped in a team? I am a 4th year undergrad with CUDA &#43; general MLeng experience with interest in this and I don&#39;t have a full team yet.,No instructor answer,I&#39;m definitely interested! I&#39;m a first year PhD student with a background in ML. Feel free to reach out to me at azhung@mit.edu
2024-11-11T06:58:05Z,lab5,148,loop_unrolling performs worse?,"<p>Has anyone seen their loop_unrolling perform slightly worse than the reference?</p>
<p></p>
<p>Similarly, multithreading_loop_unrolling seems to do worse than multithreading?</p>
<p></p>
<p>My code follows the same structure as the reference, just unrolled, so I&#39;m not sure what&#39;s going on.<br /><br />Maybe the compiler is making some simplifications with the reference version that it isn&#39;t with the loop_unrolling version?<br /><br />I&#39;m on x86 for what it&#39;s worth.<br /><br /><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fl7tj0zpcf4y4kx%2F11252e99a6e05a433614c70fac553f5ab58b82babd29ccdf17d8baaec61e21c1%2Fimage.png"" alt=""image.png"" /></p>","<p>Indeed, loop unrolling could sometimes lead to a performance drop given the complexity of modern CPUs and compilers.</p>
<p></p>
<p>I encourage you to find out why. You could use disassembly tools like <em>objdump</em> to view the compiled code, and use performance analysis tools like <em>perf</em> to profile the code. You could also try different optimization levels in Makefile (line 3 change O0 to O1 or O2. The compiler may do some automatic loop unrolling at O2 or higher, make sure to check the assembly code).</p>
<p></p>
<p>You will get full credit as long as your implementation is correct and you share some thoughts in the report.</p>",No student answer
2024-11-11T02:00:51Z,lab5,147,Reference performance for bonus points,<md>The handout says that we could get bonus points if we can further improve the performance compared to the optimized kernel in [TinyChatEngine](https://github.com/mit-han-lab/TinyChatEngine). How do we check the baseline performance of the optimized kernel?</md>,"<p>You may copy the latest kernel in the TinyChatEngine repo (kernels/avx/matmul_avx_int8_int4.cc or kernels/avx/matmul_neon_int8_int4.cc) to your codebase, and call it in transformer/src/ops/linear.cc:</p>
<p></p>
<pre>
op.mat_mul_accelerator_int8_int4_fast_no_offset(&amp;params);</pre>",No student answer
2024-11-10T17:34:48Z,lab5,146,Lab 5: M1 can&#39;t run ./evaluate.sh reference,"<p>I installed conda and llvm, started a conda env, and downloaded the model weights for ARM os. I&#39;m unable to run the evaluate bash script. My python version is updated to 3.10 in my conda env. </p>
<pre>
(tinyml_retry) ➜  transformer git:(main) uname -m               
arm64
(tinyml_retry) ➜  transformer git:(main) clang&#43;&#43; --version      
Apple clang version 12.0.5 (clang-1205.0.22.11)
Target: arm64-apple-darwin23.5.0
Thread model: posix
InstalledDir: /Library/Developer/CommandLineTools/usr/bin
(tinyml_retry) ➜  transformer git:(main) python --version
Python 3.10.15</pre>
<p><br />When I run `./evaluate.sh reference`, I run into an uncountable amount of make errors. This is the end of the error messages:<br /><br /></p>
<pre>
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../iIn file included from src/Generate.cc:1:
In file included from ./include/Generate.h:1:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/algorithm:1837:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__algorithm/find.h:31:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/cwchar:113:
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/wchar.h:148:20: error: use of undeclared identifier &#39;wcschr&#39;
  148 |   return (wchar_t*)wcschr(__s, __c);
      |                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/wchar.h:158:20: error: use of undeclared identifier &#39;wcspbrk&#39;
  158 |   return (wchar_t*)wcspbrk(__s1, __s2);
      |                    ^
lared identifier &#39;FP_SUBNORMAL&#39;
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/wchar.h:169:20: error: use of undeclared identifier &#39;wcsrchr&#39;; did you mean &#39;wcschr&#39;?
  169 |   return (wchar_t*)wcsrchr(__s, __c);
      |                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/wchar.h:150:72: note: &#39;wcschr&#39; declared here
  150 | inline _LIBCPP_HIDE_FROM_ABI _LIBCPP_PREFERRED_OVERLOAD const wchar_t* wcschr(const wchar_t* __s, wchar_t __c) {
      |                                                                        ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/wchar.h:179:20: error: use of undeclared identifier &#39;wcsstr&#39;; did you mean &#39;wcschr&#39;?
  179 |   return (wchar_t*)wcsstr(__s1, __s2);
      |                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/wchar.h:153:66: note: &#39;wcschr&#39; declared here
  153 | inline _LIBCPP_HIDE_FROM_ABI _LIBCPP_PREFERRED_OVERLOAD wchar_t* wcschr(wchar_t* __s, wchar_t __c) {
      |                                                                  ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/wchar.h:179:20: error: no matching function for call to &#39;wcschr&#39;
  153 |   return (wchar_t*)wcsstr(__s1, __s2);
      |                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/wchar.h:153:66: note: candidate disabled: &lt;no message provided&gt;
  153 | inline _LIBCPP_HIDE_FROM_ABI _LIBCPP_PREFERRED_OVERLOAD wchar_t* wcschr(wchar_t* __s, wchar_t __c) {
      |                              ~~~~~~~~~~~~~~~~~~~~~~~~~~          ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/wchar.h:179:27: error: cannot initialize a parameter of type &#39;wchar_t *&#39; with an lvalue of type &#39;const wchar_t *&#39;
  179 |   return (wchar_t*)wcsstr(__s1, __s2);
nclude/c&#43;&#43;/v1/math.h      | :397                          ^~~~:
63: error: MIn file included from AL, FP_SUBN                             ^O
RMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE,/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/wchar.h:153:82: note: passing argument to parameter &#39;__s&#39; here
  153 | inline _LIBCPP_HIDE_FROM_ABI _LIBCPP_PREFERRED_OVERLOAD wchar_t* wcschr(wchar_t* __s, wchar_t __c) {
      |                                                                                  ^
 FP_NORMAL, FP_SUBNORMAL,In file included from use of undeclared identifier &#39;FP_SUBNORMAL&#39;
src/ops/LlamaRMSNorm.cc:1:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/cmath:328:
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  392 |   return __builtin_f/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/wchar.h:190:20: error: use of undeclared identifier &#39;wmemchr&#39;
  190 |   return (wchar_t*)wmemchr(__s, __c, __n);
      |                    ^
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_N  397 |   return __builtin_fpclassify(FP_NAN, FP FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  397 |   return __bupclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FORMAL, FPP_SUBNORMAL, FP_ZERO, __xiltin_fpclassify(FP_NAN, FP_INFINITE, FP_N_INFINITE, FP_NORMAL, src/nn_modules/Int8OPTAttention.cc:1:
In file included from ./include/nn_modules/Int8OPTAttention.h:1:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/utility:284:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/compare:174:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/cmath:328:
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  392 |   retu_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
rn __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORO);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
MAL, FP_Z  E392RIn file included from src/nn_modules/Int4llamaDecoderLayer.cc:1:
In file included from ./include/nn_modules/Int4llamaDecoderLayer.h:1:
In file included from ./include/nn_modules/Int4llamaAttention.h:1:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/utility:284:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/compare:174:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/cmath:328:
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
O, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
RMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/stdlib.h:145:93: error: no member named &#39;lldiv&#39; in the global namespace
In file included from src/ops/W8A8BFP32OFP32Linear.cc:1:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/cmath:328:
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  392 |   ret/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
  145 | inline _LIBCPP_HIDE_FROM_ABI lldiv_t div(long long __x, long long __y) _NOEXCEPT { return ::lldiv(__x, __y); }
      |                                                                                           ~~^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_Zurn __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITEERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
In file included from src/nn_modules/Int8OPTDecoderLayer.cc:1:
In file included from ./include/nn_modules/Int8OPTDecoderLayer.h:1:
In file included from ./include/nn_modules/Int8OPTAttention.h:1:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/utility:284:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/compare:174:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/cmath:328:
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^

      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  402 |   /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../i  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __4mx);ret
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
urn _/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
nclude/c&#43;&#43;/v1/math.h:397:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
fatal error: too many errors emitted, stopping now [-ferror-limit=]
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
_  b397u | i l treturn __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
In file included from src/OPTTokenizer.cc:1:
In file included from ./include/OPTTokenizer.h:4:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/algorithm:1842:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__algorithm/for_each.h:16:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__ranges/movable_box.h:21:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/optional:230:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/compare:174:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/cmath:328:
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
in_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:31: error: use of undeclared identifier &#39;FP_NAN&#39;
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
In file included from src/OPTGenerate.cc:1:
In file included from ./include/Generate.h:1:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/algorithm:1842:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__algorithm/for_each.h:16:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__ranges/movable_box.h:21:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/optional:186:
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__functional/hash.h:35:8: error: reference to unresolved using declaration
   35 |   std::memcpy(&amp;__r, __p, sizeof(__r));
      |        ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/cstring:79:1: note: using declaration annotated with &#39;using_if_exists&#39; here
   79 | using ::memcpy _LIBCPP_USING_IF_EXISTS;
      | ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:63: /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_S  402 |   rUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
eturn __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  402 |   return __builtin_f/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:52: In file included from src/Generate.cc:1:
In file included from ./include/Generate.h:1:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/algorithm:1842:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__algorithm/for_each.hpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
error: use of undeclared identifier &#39;FP_NORMAL&#39;
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, Ffatal error: too many errors emitted, stopping now [-ferror-limit=]
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_IP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
:16:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__ranges/movable_box.h:21:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/optional:186:
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__functional/hash.h:35:8: error: reference to unresolved using declaration
   35 |   std::memcpy(&amp;__r, __p, sizeo/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
NFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  402 |   return __builtin_fpclassify(FfP(__r));
      |        ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/cstring:79:1: note: using declaration annotated with &#39;using_if_exists&#39; here
   79 | using ::memcpy _LIBCPP_USING_IF_EXISTS;
      | ^
_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:402:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  402 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
fatal error: too many errors emitted, stopping now [-ferror-limit=]
fatal error: too many errors emitted, stopping now [-ferror-limit=]
In file included from src/LLaMAGenerate.cc:2:
In file included from ./include/Generate.h:1:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/algorithm:1842:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__algorithm/for_each.h:16:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__ranges/movable_box.h:21:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/optional:230:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/compare:174:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/cmath:328:
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
In file included from src/OPTGenerate.cc:1:
In file included from ./include/Generate.h:1:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/algorithm:1842:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__algorithm/for_each.h:16:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__ranges/movable_box.h:21:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/optional:230:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/compare:174:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/cmath:328:
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
In file included from src/Generate.cc:1:
In file included from ./include/Generate.h:1:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/algorithm:1842:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__algorithm/for_each.h:16:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/__ranges/movable_box.h:21:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/optional:230:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/compare:174:
In file included from /opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/cmath:328:
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:39: error: use of undeclared identifier &#39;FP_INFINITE&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                       ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:52: error: use of undeclared identifier &#39;FP_NORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                    ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:63: error: use of undeclared identifier &#39;FP_SUBNORMAL&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                               ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:392:77: error: use of undeclared identifier &#39;FP_ZERO&#39;
  392 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                                                                             ^
/opt/homebrew/Cellar/llvm/19.1.3/bin/../include/c&#43;&#43;/v1/math.h:397:31: error: use of undeclared identifier &#39;FP_NAN&#39;
  397 |   return __builtin_fpclassify(FP_NAN, FP_INFINITE, FP_NORMAL, FP_SUBNORMAL, FP_ZERO, __x);
      |                               ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
../kernels/neon/matmul_neon_int4.cc:2:10: fatal error: &#39;assert.h&#39; file not found
    2 | #include &lt;assert.h&gt;
      |          ^~~~~~~~~~
../kernels/neon/matmul_neon_int4_offset.cc:2:10: fatal error: &#39;assert.h&#39; file not found
    2 | #include &lt;assert.h&gt;
      |          ^~~~~~~~~~
../kernels/quantizer.cc:6:5: error: use of undeclared identifier &#39;assert&#39;
    6 |     assert(size % block_size == 0);
      |     ^
../kernels/quantizer.cc:7:5: error: use of undeclared identifier &#39;assert&#39;
    7 |     assert(block_size == 32);
      |     ^
2 errors generated.
make: *** [build/transformer/../kernels/quantizer.o] Error 1
1 error generated.
1 error generated.
make: *** [build/transformer/../kernels/neon/matmul_neon_int4_offset.o] Error 1
make: *** [build/transformer/../kernels/neon/matmul_neon_int4.o] Error 1
20 errors generated.
make: *** [build/transformer/src/nn_modules/Fp32llamaDecoder.o] Error 1
1 error generated.
make: *** [build/transformer/../kernels/starter_code/multithreading.o] Error 1
5 errors generated.
make: *** [build/transformer/../kernels/matmul_int8.o] Error 1
5 errors generated.
1 error generated.
1 error generated.
make: *** [build/transformer/../kernels/matmul_int4.o] Error 1
1 error generated.
make: *** [build/transformer/../kernels/matmul_imp.o] Error 1
make: *** [build/transformer/../kernels/starter_code/multithreading_loop_unrolling.o] Error 1
1 error generated.
make: *** [build/transformer/../kernels/starter_code/loop_unrolling.o] Error 1
make: *** [build/transformer/../kernels/starter_code/reference.o] Error 1
20 errors generated.
make: *** [build/transformer/src/ops/arg_max.o] Error 1
1 error generated.
20 errors generated.
make: *** [build/transformer/src/LLaMATokenizer.o] Error 1
make: *** [build/transformer/src/ops/embedding.o] Error 1
20 errors generated.
make: *** [build/transformer/src/nn_modules/OPTForCausalLM.o] Error 1
20 errors generated.
make: *** [build/transformer/src/ops/BMM_S8T_S8N_S8T.o] Error 1
20 errors generated.
make: *** [build/transformer/src/ops/W8A8B8O8Linear.o] Error 1
20 errors generated.
20 errors generated.
20 errors generated.
20 errors generated.
make: *** [build/transformer/src/nn_modules/Fp32llamaAttention.o] Error 1
make: *** [build/transformer/src/nn_modules/Int8OPTDecoder.o] Error 1
make: *** [build/transformer/src/ops/W8A8BFP32OFP32Linear.o] Error 1
make: *** [build/transformer/src/ops/BMM_F32T.o] Error 1
20 errors generated.
make: *** [build/transformer/src/nn_modules/Int4llamaDecoder.o] Error 1
20 errors generated.
make: *** [build/transformer/src/utils.o] Error 1
20 errors generated.
20 errors generated.
20 errors generated.
make: *** [build/transformer/src/nn_modules/Int4llamaAttention.o] Error 1
20 errors generated.
make: *** [build/transformer/src/ops/linear.o] Error 1
20 errors generated.
20 errors generated.
make: *** [build/transformer/src/ops/RotaryPosEmb.o] Error 1
make: *** [build/transformer/src/nn_modules/Fp32llamaForCausalLM.o] Error 1
make: *** [build/transformer/src/ops/W8A8B8O8LinearReLU.o] Error 1
make: *** [build/transformer/src/ops/batch_add.o] Error 1
20 errors generated.
20 errors generated.
make: *** [build/transformer/src/ops/LayerNorm.o] Error 1
make: *** [build/transformer/src/ops/softmax.o] Error 1
20 errors generated.
make: *** [build/transformer/src/ops/BMM_S8T_S8N_F32T.o] Error 1
20 errors generated.
20 errors generated.
20 errors generated.
make: *** [build/transformer/src/nn_modules/Int8OPTDecoderLayer.o] Error 1
make: *** [build/transformer/src/ops/LlamaRMSNorm.o] Error 1
make: *** [build/transformer/src/ops/LayerNormQ.o] Error 1
20 errors generated.
20 errors generated.
make: *** [build/transformer/src/nn_modules/Int8OPTAttention.o] Error 1
make: *** [build/transformer/src/nn_modules/Int4llamaForCausalLM.o] Error 1
20 errors generated.
20 errors generated.
make: *** [build/transformer/src/nn_modules/Int4llamaDecoderLayer.o] Error 1
make: *** [build/transformer/src/nn_modules/Fp32llamaDecoderLayer.o] Error 1
1 error generated.
make: *** [build/transformer/../kernels/starter_code/all_techniques.o] Error 1
1 error generated.
make: *** [build/transformer/../kernels/starter_code/simd_programming.o] Error 1
20 errors generated.
20 errors generated.
make: *** [build/transformer/src/OPTTokenizer.o] Error 1
make: *** [build/transformer/src/Generate.o] Error 1
20 errors generated.
make: *** [build/transformer/src/OPTGenerate.o] Error 1
20 errors generated.
make: *** [build/transformer/src/LLaMAGenerate.o] Error 1
Compilation failed!</pre>",No instructor answer,"<md>This happened to me after getting a new Mac and migrating from an x86 Macbook Pro. I had to reinstall the xcode command line tools:

```
sudo rm -rf $(xcode-select -print-path)
xcode-select --install
```</md>"
2024-11-09T17:36:15Z,"project, logistics",145,Still looking for project team!,"<md>Hi everyone,

I still have not found a group for the course project and if you are looking for a member let me know. I am a 5th year PhD student. I have great coding and CUDA Kernel programing experience.

Best,
Amin Heyrani Nobari</md>",No instructor answer,"Hi Amin, we have a spot for one more person in our group, send me an email (gmanso@mit.edu) with your phone number so I can add you to our WhatsApp group."
2024-11-09T02:37:36Z,lab5,143,Lab5,I just wanted to confirm that we only need to submit the lab report and patch file for Lab5 on Canvas (and that we don&#39;t need to commit/push our code)?,Yes,No student answer
2024-11-08T23:46:27Z,lab5,142,vdotq_s32 arm documentation ambiguity,"<p>tldr: if everything in your SIMD code is working except for the dot product, this might be helpful.</p>
<p></p>
<p>Although <a href=""https://developer.arm.com/architectures/instruction-sets/intrinsics/vdotq_s32"" target=""_blank"" rel=""noopener noreferrer"">the documentation that you&#39;d find from a google search</a> suggests that vdotq_s32 modifies the destination register passed in, it really does not. You need to use the 128 lane value returned by the operator.</p>
<p></p>
<p>Upon a quick further look, this seems to be because we are using arm v8 (which uses neon intrinsics).</p>",No instructor answer,No student answer
2024-11-08T23:17:49Z,lab5,141,Question regarding architecture for M1 chip laptop,I&#39;m running the lab 5 from Macbook air 2020 M1 chip. For some reason loop unrolling passes the tests only if I fill the code under the QM_x86 part of the code. Is this expected behaviour? I was under the assumption that the code under QM_ARM should work for my laptop. Thanks in advance!,"<p>It&#39;s weird. Could you confirm you downloaded the correct version of the models?</p>
<pre>
python download_model.py --model LLaMA_7B_2_chat --QM QM_ARM</pre>
<p>Also check the target of your compiler and the architecture of your system:</p>
<pre>
clang&#43;&#43; --version
uname -m</pre>
<p></p>",No student answer
2024-11-07T23:14:41Z,project,139,Project Collaboration Request,"Hi all,<br /><br />I am a second-year in EECS. I know I started reaching out for teammates a bit late, but I am back on track for some exciting work!<br /><br />I have experience in algorithm design, modelling, and software. I have researched on vision-based person-following robots with YOLO and person re-identification to consistently follow the movement of an elder, and a visual knowledge interaction, navigation &amp; manipulation system for dataset embeddings. I also developed several side software projects. I have been essentially deriving joy being a relentless learner and explorer, stemming from my passion.<br /><br />I am also very excited (also slightly ambitious) about potential work for the project, and beyond. Personally, I am resilient with diversity and usually brainstorm extensively with my teammates for project ideas so that we work on something everyone is excited about. That said, I have some preliminary project ideas about long-context LLM, multi-modality, and variable network (with different energy consumption, throughput, etc.) on the task (rather than the hardware architecture). If you are still looking for teammates, I will be eager to chat to see if we can cook something together. Talk with me at <a href=""mailto:jophyyjh@mit.edu"" target=""_blank"" rel=""noopener noreferrer"">jophyyjh@mit.edu</a>~<br /><br />Best regards,<br />Jophy Ye",No instructor answer,No student answer
2024-11-07T18:15:11Z,project,138,Parallelize two matrix multiplications on Cuda,"<p>Hi,</p>
<p></p>
<p>I want to parallelize the forward pass of a custom nn.Module in pytorch to accelerate the inference of my model for the project. The issue is that I have a shared variable, so torch.compile executes this sequentially. In particular, I want to parallelize</p>
<p><br />def forward(self, x)</p>
<p>    return F.linear(x, self.W1) &#43; F.linear(x, self.W2)</p>
<p></p>
<p>Assume that one cannot merge self.W1 and self.W2 for some reason (e.g. because they have different quantization precisions). </p>
<p>Is this possible to do or does it have to create a copy of x to be able to parallelize it on gpus?</p>",No instructor answer,No student answer
2024-11-07T16:29:50Z,lab5,137,Have I installed correctly [Windows]?,"<md>I haven't edited any of the lab code. Wondering if this is the intended output when running evaluate.sh

I've been avoiding WSL, but if this is wrong I'll switch to WSL.

![image.png](/redirect/s3?bucket=uploads&prefix=paste%2Fkekfqxttgoz7bd%2Ff5d29bb2e93d87af3d6287727ab7bad2ace25c0302f57998d84f8388c11aa2a6%2Fimage.png)</md>","<p>No, this is definitely wrong. A correct output should be like this:</p>
<pre>
-------- Sanity check of reference implementation: Passed! --------
Section, Total time(ms), Average time(ms), Count, GOPs
reference, 1679.977051, 167.996994, 10, 1.560402

-------- Sanity check of loop_unrolling implementation: Passed! --------
Section, Total time(ms), Average time(ms), Count, GOPs
loop_unrolling, 1474.411011, 147.440994, 10, 1.777957

-------- Sanity check of multithreading implementation: Passed! --------
Section, Total time(ms), Average time(ms), Count, GOPs
multithreading, 460.037994, 46.002998, 10, 5.698312

-------- Sanity check of simd_programming implementation: Passed! --------
Section, Total time(ms), Average time(ms), Count, GOPs
simd_programming, 1185.531006, 118.553001, 10, 2.211195

-------- Sanity check of multithreading_loop_unrolling implementation: Passed! --------
Section, Total time(ms), Average time(ms), Count, GOPs
multithreading_loop_unrolling, 468.674988, 46.867001, 10, 5.593300

-------- Sanity check of all_techniques implementation: Passed! --------
Section, Total time(ms), Average time(ms), Count, GOPs
all_techniques, 104.831001, 10.483000, 10, 25.006344

All tests completed!</pre>",No student answer
2024-11-07T07:03:34Z,lab5,136,Lab 5 Apple M3 chip?,"<p>Hello,</p>
<p></p>
<p>The handout for lab5 specifies that the lab will work for ARM (Apple M1/M2) chips. Do we know that it won&#39;t work for Apple M3 chips, or has it just not been tested yet?</p>
<p></p>
<p>Thanks a lot!</p>",We didn&#39;t test it on M3 chip but it should be OK. If you find something interesting on M3 feel free to include it in your report and/or open an issue on our github repo.,No student answer
2024-11-07T01:10:19Z,lab5,135,Lab 5 GOP Metric,"In lab 5, what does the GOP metric stand for?","<p>GOPs, or giga operations per second, is a metric of the performance of your implementation. Higher GOPs number means better performance.</p>
<p>It is also known as GFLOPS for floating-point operations.</p>
<p>For GEMM, the operation can be multiplication or add, so the number of operations is 2*M*N*K, where M is the batch size, K is the number of input channels, and N is the number of output channels.</p>",No student answer
2024-11-07T00:06:19Z,lab5,134,Lab 5 wont build (Windows),"<md>Hello, I'm having trouble building lab 5. I believe I've installed all the prerequisites.

The main source of error seems to be that windows cant run `.sh` files?
It's using git bash as a workaround.

![image.png](/redirect/s3?bucket=uploads&prefix=paste%2Fkekfqxttgoz7bd%2F5bcfefc0384fcc962a6516c51e5d956516be25035274293e03f1a7234b2e6090%2Fimage.png)</md>",No instructor answer,"<p>add</p>
<div>
<div>#include &lt;stdint.h&gt;</div>
</div>
<div>at the top of quantizer.cc</div>"
2024-11-06T04:32:04Z,lab5,132,Loop unrolling,"for the x86 version of loop rolling, why are there 32 loops set up, just like in the reference? my understanding was that since it seems that it&#39;s expected that we unpack 4 packed bytes instead of just 1 per loop, that there should be only 8 loops run as opposed to 32.",No instructor answer,"<p>I belive its because col increments 4 at a time</p>
<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fktemkt1vezb2pj%2F9c97302dae5d4349353457936380c9c1938adc5ea637be24c376cff321c5a7aa%2Fimage.png"" alt=""image.png"" /></p>
<p>so you are doing 4 columns at a time</p>"
2024-11-05T18:56:23Z,lab5,130,Lab5 report,"For the Lab5 report, do we have to copy-paste the entire code file onto the document or can we just put a screenshot of the relevant TO-DO code snippets for each question?","You could put the TODO code snippets in the written report. However, keep in mind that you still need to submit the patch file which contains all changes you made in the codebase. (See the last section of lab instruction)",No student answer
2024-11-04T19:22:20Z,lab5,125,"Definitions of _mm256_and_si256, _mm256_srli_epi16, etc.",Can anyone point me to where these functions are defined?,No instructor answer,"they are part of Intel’s AVX (Advanced Vector Extensions) intrinsic functions <br />u can find more here <a href=""https://www.intel.com/content/www/us/en/docs/cpp-compiler/developer-guide-reference/2021-8/mm256-srli-epi16-32-64.html"" target=""_blank"" rel=""noopener noreferrer"">link</a> <br /><br />6.106 mit ocw course (6.172) might also be useful to see how those vector ops can be used"
2024-11-04T19:12:02Z,lab5,124,Lab 5 submission name,"By naming the submission like`{studentID}-{ISA}.patch`, does the {studentID} part mean our Kerberos username or our actual numeric student ID number?",Please use your numeric student ID. Thanks.,No student answer
2024-11-04T15:11:56Z,lab5,123,Compiling evaluate on the reference,"<p>Hi, I just downloaded everything I needed to and tried running evaluate on the reference and I got an error. I am not sure what it is or why I got it. I am attaching an image of it below.</p>
<p></p>
<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fkqlbk12o6385jn%2F2d0b77d88d616c3dac4ffbbabd0ec974b7577105837770bab61ff7759781ff23%2FScreenshot_2024-11-04_at_10.09.02_AM.png"" width=""1428"" height=""126"" alt="""" /></p>","<p>Please try to run the evaluation script in the `transformer` directory.</p>
<pre>
cd transformer
./evaluate.sh reference</pre>
<p></p>",No student answer
2024-11-04T14:37:21Z,"logistics, other",122,Is there a way to dispute the grading for a lab assignment?,"I think some points were incorrectly deducted from my assignment, is there some way I can dispute it? Thanks!","<md>Hi, 

You can leave a comment on Canvas on the submission page.</md>",No student answer
2024-11-04T14:14:36Z,other,121,Attention Sinks and Streaming LLM,"<p>From my understanding of attention sinks and streaming LLM, it seems there are two changes compared to window attention:</p>
<p></p>
<p>1. The same initial tokens, &#34;attention sinks&#34; are kept throughout.</p>
<p>2. The positional encoding uses the position in the cache rather than the positions in the original text.</p>
<p></p>
<p>Since the experiments in the paper suggest that the semantics of the sink tokens are not actually important, why is 1 necessary? Could you simply do window attention while using the cache position (only 2) and get the similar results as to streaming LLM attention?</p>
<p></p>
<p>Thank you.</p>","<md>Great question! The initial tokens absorb a significant portion of the attention scores, which is crucial for maintaining the overall attention distribution. This effect is due to their key states, rather than their positional encodings or semantics. By keeping these tokens in the cache, we prevent the attention distribution from deviating too far from the model’s original distribution. Simply shifting position encodings for windowed attention, as you described, wouldn’t achieve the same stability.</md>",No student answer
2024-11-04T02:44:03Z,"project, logistics",120,Can our project team consist of fewer than four (4) people?,<p>Can our project team consist of fewer than <strong>four (4)</strong> people?</p>,No instructor answer,No student answer
2024-11-03T22:11:25Z,lab5,118,reference model response time,"<p>Hello, I am starting Lab 5, but when I compile and run the reference model, it seems like nothing is outputted by the assistant for a long time; longer than the compilation time with ./evalaute.sh reference. </p>
<p></p>
<p>It just seems like there is no work being done by my computer in the background when running ./chat reference even though I saw work being done while building with ./evaluate.sh reference</p>","<p>The reference implementation is very slow. Expect several minutes before it starts outputting anything :)</p>
<p></p>
<p>The evaluation code only runs a single GEMM operation in the network so it is much faster.</p>",No student answer
2024-11-03T17:10:08Z,project,117,How are the presentation dates determined?,"<p>Hello, how and when will the final project presentation dates be determined? Will it be determined on a first come first serve basis?</p>
<p></p>
<p>Thank you!</p>",No instructor answer,No student answer
2024-11-02T00:17:11Z,other,116,WorldModelBench daily Leaderboard,"<p>Dear students,<br />        We are sharing the number of votes for top contributors in this thread (anonymous). Enjoy!</p>
<p></p>
<p><strong>11.1</strong>: 1151 (1st) 734 (2nd) 504 (3rd) 397 (4th)</p>
<p><strong>11.2:</strong> 1568 (1st) 1161 (2nd) 700 (3rd) 397 (4th)</p>
<p><strong>11.3: </strong>2221 (1st) 1664 (2nd) 800 (3rd) 397 (4th) 70 (5th) 31 (6th)</p>
<p><strong>11.4:</strong> 397 (4th) 143 (5th) 70 (6th)</p>
<p></p>
<p>Reminder: The deadline for the competition is November 4, 2024, 11:59 PM ET!</p>
<p>(Updated on 11.3) We have introduced several more models for students to play around: Open-Sora-Plan, t2vturbo and an API version of the recent popular mochi. Enjoy!</p>
<p>(Updated on 11.4) Less than <strong>8 hours</strong> left, come to vote and get some cool edge devices!!!<br />(Updated on 11.4) We have successfully finished the competition, and will announce the winners tomorrow at class! Thanks everyone for participating! The website will be hosted at the same link, we encourage students to continuously play around!</p>
<p></p>",No instructor answer,No student answer
2024-11-01T17:20:35Z,lab5,115,Downloading LLaMA2-7B-chat model with M1 Mac results in incorrect md5sum,"<p>See title. Downloading multiple times also results in different md5sums, see screenshot below:</p>
<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fl7sbijy67vy1ey%2Fbff6afa7aa781db9af700b19982d9e280d4b041fef638d7464850730b9bb581d%2Fimage.png"" alt=""image.pngNaN"" /></p>","<p>Hi,</p>
<p></p>
<p>We find that this is due to the dropbox link being rate-limited. I have already updated the link to huggingface. Please pull the latest code from the repo and try again. Thank you!</p>
<p></p>
<p>Regards,</p>
<p>Zhekai Zhang</p>",No student answer
2024-11-01T13:12:09Z,project,113,Project Proposal,"What are the logistics for the project proposal? (i.e. how to format the project proposal, what information should be included in it, where to submit it, etc) I apologize if this is already posted, I have looked and can&#39;t seem to find it.",No instructor answer,Bump
2024-10-31T18:06:50Z,lab5,112,Lab 5 SIMD code does not compile on M1 Macs,"<md>Using the `vdotq_s32` SIMD instruction causes a compilation error on my M1 Mac because the `dotprod` feature is not enabled by default. I was able to fix this error by making the following change to the Makefile:

![image.png](/redirect/s3?bucket=uploads&prefix=paste%2Fkt5sl9h7b386up%2F71f2128ef9515e4d15da244351f4c8841f9a772bb2e11c7db5ac4dfaf2a27f92%2Fimage.png)

(I've created a pull request at https://github.com/mit-han-lab/tinychat-tutorial/pull/6 fixing this issue)</md>","<p>Hi,</p>
<p></p>
<p>Thank you so much for your contribution! I will test your code shortly and merge the change after that.</p>
<p></p>
<p>Regards,</p>
<p>Zhekai Zhang</p>",No student answer
2024-10-31T14:43:37Z,project,111,Looking for project teammates on audio codecs (search closed),"<p>Hi everyone,<br /><br />I&#39;m Shih-Lun Wu, and I&#39;m a 1st-year EECS PhD student working on music &amp; audio processing, some of my past works can be found here: <a href=""https://slseanwu.github.io/publications/"">https://slseanwu.github.io/publications/</a>.<br /><br />I have some ideas on improving the latency of audio codecs (e.g., <a href=""https://github.com/descriptinc/descript-audio-codec"" target=""_blank"" rel=""noopener noreferrer"">Descript Audio Codec</a>), which can be seen as &#34;tokenizers of audios&#34; that discretize continuous waveforms and enable downstream (audio) LLM training.<br /><br />Audio codecs are an important component for streamable/interactive audio generation systems (e.g., <a href=""https://arxiv.org/abs/2410.00037"" target=""_blank"" rel=""noopener noreferrer"">Moshi</a>), but their efficiency improvement is less explored than that of LLMs. Having a fast codec would get us one step closer to realtime systems for speech/music generation!</p>
<p></p>
<p>Please feel free to reach out via email (slseanwu@mit.edu) if you&#39;re interested in collaborating in this direction! Thanks!</p>
<p></p>
<p>Shih-Lun</p>",No instructor answer,Hi Shih-Lun! Just sent an email to you about my interest in collaborating with you on this project :)
2024-10-29T19:22:21Z,project,108,Project Group Finding System,Hi I was wondering if there is an efficient system to find groups for the final project. Perhaps a spreadsheet with the different projects in the handout and people can fill out which project they&#39;re interested in and connect with other students with similar interests like that. ,No instructor answer,"<p>Hey, </p>
<p>Here is a spreadsheet to track and add new project groups in order to get connected easier.  Wanted to do the HART on Mac (Project 13), so feel free to join there with your kerb or contact info.  Looking forward to collaborating.</p>
<p></p>
<p><a href=""https://docs.google.com/spreadsheets/d/1bSaqo9m0IVRYj4_Vig0OlDoavFfeU0ZB9x9v0C-Rlso/edit?usp=sharing"" target=""_blank"" rel=""noopener noreferrer"">https://docs.google.com/spreadsheets/d/1bSaqo9m0IVRYj4_Vig0OlDoavFfeU0ZB9x9v0C-Rlso/edit?usp=sharing</a> </p>"
2024-10-29T17:40:28Z,"project, logistics",107,Final project idea for making a music generation model more efficient - looking for collaborators!,"<p>Hi everyone,</p>
<p></p>
<p>My friend and I were thinking of using techniques taught in class like pruning and quantization on a Hierarchical Generative model that I developed capable of generating audio of vocal melodies in Hindustani music (North Indian Classical music). We use both an autoregressive transformer and diffusion backbones in our work and we could work with either or both versions of my model (happy to talk about this further). I&#39;m trying to gear this generative model toward real-time inference and thus am excited about making it as efficient as possible. If you&#39;re interested shoot me an email at snnithya@mit.edu!</p>
<p></p>
<p><strong>Relevant links:</strong><br />Paper: <a href=""https://arxiv.org/abs/2408.12658"" target=""_blank"" rel=""noopener noreferrer"">https://arxiv.org/abs/2408.12658</a></p>
<p>Huggingface demo (which could be a lot faster after this project!): <a href=""https://huggingface.co/spaces/snnithya/GaMaDHaNi"" target=""_blank"" rel=""noopener noreferrer"">https://huggingface.co/spaces/snnithya/GaMaDHaNi</a> </p>
<p>Code: <a href=""https://github.com/snnithya/GaMaDHaNi"" target=""_blank"" rel=""noopener noreferrer"">https://github.com/snnithya/GaMaDHaNi</a> </p>
<p></p>
<p>Nithya</p>",No instructor answer,No student answer
2024-10-29T15:25:53Z,"project, logistics",106,Final Project Presentations,"For the final project presentations, do all group members have to be there in person to present?",No instructor answer,No student answer
2024-10-28T22:32:40Z,project,105,Looking for Collaborators for Final Project: Let&#39;s Push the Frontiers of Efficient ML!,"<div>
<div>
<div>
<div>
<div>
<p>Hi everyone,</p>
<p></p>
<p>I’m looking for collaborators or a team for the final project. I’m a second-year PhD student in the EECS department, interested in exploring exciting projects that push the boundaries of efficient ML with the potential to evolve into a publication.</p>
<p></p>
<p>If you’re interested in working together, feel free to reach out here or contact me directly at gmanso@mit.edu.</p>
<p></p>
<p>Looking forward to connecting!</p>
<p></p>
<p>Gabriel</p>
</div>
</div>
</div>
</div>
</div>",No instructor answer,No student answer
2024-10-28T20:24:09Z,project,104,Project Partners,"Hi, I am looking for people / a team for the final project. I am a senior at Harvard studying CS. If you want to work together, reach out here or at mpail@college.harvard.edu",No instructor answer,No student answer
2024-10-28T05:21:44Z,lab4,103,Lab 4 2.3 NaN error,"<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fktb0nxlly1k4nx%2F44a46675bd12f6260aab1193ae25b41b019f3127bb4fc98bc4034fa1948c43e0%2Fimage.png"" alt=""image.png"" /></p>
<div>
<div></div>
</div>
<p>I could use some help tracking down this error.</p>
<div>
<div>Modifying the scales line via adding epsilon before pow, then clamping all the values seems to fix it and give a perfect perplexity of 17.92.<br />Is this allowed?</div>
</div>",No instructor answer,"EDIT: Just saw the post, didn&#39;t have lab 4 in name so didn&#39;t see it. RESOLVED"
2024-10-28T02:00:08Z,logistics,102,Lab grading,When will labs 2-3 be graded so that we can get feedback on our work and see how well we are doing in the class?,No instructor answer,No student answer
2024-10-25T01:51:07Z,lab3,99,Lab 3 Question 8,"<p>I&#39;m getting an error when running <br /><br /></p>
<div>
<div>subnets_evo_macs[millonMACs] = search_and_measure_acc(nas_agent, search_constraint, n_subnets=300)</div>
</div>
<div><br />The error traces back to the crossover_sample() function in EvloutionSearcher which I have currently defined it as <br /><br />
<div>
<pre>
    def crossover_sample(self, sample1, sample2, constraint):

        print(&#34;crossover_sample&#34;)

        while True:

            new_sample = copy.deepcopy(sample1)

            for key in new_sample.keys():

                if not isinstance(new_sample[key], list):

                    ############### YOUR CODE STARTS HERE ###############

                    # hint: randomly choose the value from sample1[key] and sample2[key], random.choice

                    new_sample[key] = np.random.choice([sample1[key], sample2[key]])

                    ############### YOUR CODE ENDS HERE #################

                else:

                    for i in range(len(new_sample[key])):

                        ############### YOUR CODE STARTS HERE ###############

                        new_sample[key][i] = np.random.choice([sample1[key][i], sample2[key][i]])

                        ############### YOUR CODE ENDS HERE #################

            print(new_sample)

            efficiency = self.efficiency_predictor.get_efficiency(new_sample)

            if self.efficiency_predictor.satisfy_constraint(efficiency, constraint):

                print(&#34;crossover_sample done with&#34;, new_sample)

                return new_sample, efficiency</pre>
</div>
<br />The issue further traces to the get_active_subnet() function called in<br />efficiency = self.efficiency_predictor.get_efficiency(new_sample)</div>",No instructor answer,No student answer
2024-10-24T22:11:46Z,lab3,98,GPU,"<p>Hi, I&#39;m still working through lab 3 but I got this while working on question 9. What should I do? </p>
<p></p>
<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fkc5gbhis6d94bq%2F5899889591dc1bd618a32f21d6b5d8b373cd244a80497247f9c92965208d0622%2Fimage.png"" alt=""image.pngNaN"" /></p>
<p></p>
<p>RuntimeError: Found no NVIDIA driver on your system.</p>
<p></p>",No instructor answer,i just share it with a different google account and use that google account whenever i encounter that issue. 
2024-10-24T20:36:51Z,lab5,97,Debugging,"For lab 5, are there tips for debugging? If the evaluation fails, are we able to see what parts of the tests are failing?",No instructor answer,No student answer
2024-10-24T19:58:20Z,logistics,96,Posting lecture slides online ahead of lecture?,"<p>Would it be possible to link the lecture slides on the course site before or by the start of lectures again to follow along with during the lecture? In the last few lectures, I&#39;ve noticed that the slides got posted after lecture.</p>
<p></p>
<p>Thanks!</p>",No instructor answer,No student answer
2024-10-23T23:16:26Z,lab4,93,Broken dependency fails to build,"<p>Hello, I&#39;m trying to get started on Lab 4. Unfortunately, the requirement `tokenizers==0.13.3` fails to build in a pretty funny way: some Rust code in the package performs an unsound cast that rustc rejects.</p>
<p></p>
<p>There&#39;s a Github issue about this:</p>
<p><a href=""https://github.com/huggingface/tokenizers/issues/1485"">https://github.com/huggingface/tokenizers/issues/1485</a></p>
<p></p>
<p>So... What should I do here, exactly? Can I try different versions of `tokenizers`? Version 0.20.1 doesn&#39;t have this problem.</p>
<p></p>
<p></p>
<p>Tl;dr Help, the borrow checker won&#39;t let me run this lab!</p>
<p></p>
<p></p>
<p>Edit: for now I&#39;ll go with the workaround from that thread—downgrade your Rust toolchain to one that didn&#39;t flag this error. This only works with 0.13.2, though, not 0.13.3, so... I hope that&#39;s not a problem for the lab.<br />https://github.com/huggingface/tokenizers/issues/1485#issuecomment-2040349997</p>",No instructor answer,"<p>`sentencepiece` also fails to build, with a much more obscure error: some script called `build_bundled.sh` errors out. If anyone else encounters that and figures out a workaround, please let me know! Thanks.</p>
<p></p>
<p>Edit: figured this one out. The build script assumes you have `cmake` installed. So, have `cmake` installed! See here:<br /><a href=""https://github.com/google/sentencepiece/issues/932"">https://github.com/google/sentencepiece/issues/932</a></p>"
2024-10-23T22:51:32Z,lab4,92,NaN in question 2.3,"<md>I am getting a NaN in question 2.3 which I have traced it to the presence of a zero value in $$\texttt{s_x}$$, which causes problems when we divide by $$\texttt{scales.min()}$$ some lines later. This is dependent on the activations from the code we were provided. What should we do to work around this?</md>",No instructor answer,Use torch.clamp to turn zeros into small positive values
2024-10-23T03:52:10Z,lab4,91,"For Lab 4, Question 2.3",I got a perplexity of 17.93 instead of 17.92. Is this sufficient?,No instructor answer,No student answer
2024-10-22T23:02:33Z,lab3,89,Lab 3 Question 3 Number of layers,"<p>Might be dumb question, but when we have n_layers = 3, does that include the final output layer? If so it seems like we should end</p>
<div>
<div>        for i in range(self.n_layers)</div>
<div>one iteration early.</div>
</div>",<md>Good question! `n_layers=3` does not include the output layer.</md>,No student answer
2024-10-22T05:54:07Z,lab3,85,Lab 3 Question 1,"I&#39;m a little confused on how these configuration parameters translate to the visualized model architecture. The number of &#39;ks&#39; doesn&#39;t seem to directly match the number of blocks and it thus it seems to &#34;skip&#34; some kernels. Also as for &#39;d&#39;, my understanding of the depth is the number of blocks per stage, which also doesn&#39;t seem to hold in the visualized model.<br /><br /><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fjlmbfmpa9r31at%2Ff939641eecca4b44321a774b6bf46880d83e281e704d2fb8ebdf8b4331f85016%2Fimage.png"" alt=""image.pngNaN"" width=""870"" height=""331"" />","<md>Hi there,

`ks` (kernel size) and `e` (expand ratio) that exceeds stage depth will not matter in the final architecture. This is why you may see that the lengths of these arrays differ from the actual network depth. `d` actually refers to ""difference between the current stage's depth - current stage's base depth"", where base depth is defined in one cell above. 

We are expecting an analysis on the importance of `ks`, `e`, `d`, image resolution, etc. on the accuracy. 


Best,

Haotian</md>","<p>Honestly, I&#39;m a little confused by what kind of answer this question is even looking for. Are we <em>allowed</em> to run extra experiments, or are we really supposed to just &#34;run the cell above multiple times&#34;? And what does it mean by &#34;which dimension plays the most important role for the accuracy?&#34; Like, the dimension of which layer? Or is it looking for &#34;kernel size&#34; or &#34;expand ratio&#34;?</p>
<p></p>
<p>This feels like a question that&#39;s &#34;too simple&#34; in some sense, so the difficulty has to come from making the statement obscure, or else there would be nothing at all to do. I&#39;m at a loss.</p>
<p></p>
<p>Edit: to try to answer your actual question, though, it <strong>looks</strong> like the internal &#39;stage&#39; separators have associated dummy values for `ks` and `e` that don&#39;t actually contribute to the network architecture?<br /><br />Second edit: actually, it looks like the length of the `ks` and `e` fields is always 20, for any random network, regardless of the choices of depths. That might be some kind of hint for us.</p>"
2024-10-22T05:36:05Z,lab3,84,[Lab 3] All search strategies seem to do about the same regardless of the constraints?,"<md>Are we expecting any accuracy outside the 92-94% range? Random and evolutionary search seem to do about the same for me. Also, the constraints don't seem to have a huge impact on the design of the final architecture.

As with @74, both parts of Q9 worked for me on the first try. 

All these results seem suspicious to me, just want to ensure I'm not doing something wrong.</md>",No instructor answer,"I&#39;ve found the same, and was also starting to think I was doing something wrong. Maybe that&#39;s just how it is? But then I&#39;m not sure what we&#39;re supposed to take away from these exercises. There&#39;s a bit of a vanishing gradient problem :)"
2024-10-22T04:48:45Z,other,83,[Lecture 8] OFA vs Hard-ware Specific NAS,"<md>How does OFA performance compare to a neural architecture search that is hardware specific?

I expect OFA to perform worse because it tries to learn a parent network that contains many useful subnetworks (and therefore should trade off performance compared to just training a single subnetwork). Curious how big this trade-off is. The graph from the lecture doesn't seem to answer this question.

![image.png](/redirect/s3?bucket=uploads&prefix=paste%2Fkekfqxttgoz7bd%2Fb381ed1c75e526b6ece75849ea26cf3708e97e5c7f55e5ac2ebaf59f603dd242%2Fimage.png)</md>","<md>Hi Jagdeep,

Good question! We can indeed specialize models for different platforms using OFA. The specialized subnets, if directly used, can usually already outperform searched + retrained results from other single-shot NAS methods. This is because the OFA training pipeline can benefit subnets within the design space. We can also finetune the specialized subnets on the downstream tasks, which typically leads to even better results.

Best,

Haotian</md>",No student answer
2024-10-22T04:42:27Z,lab3,82,Tutorial 2,Where can we find tutorial 2 as mentioned by question 4?,"<md>Hi there,

You may refer to lab 0 for relevant information.

Best,

Haotian</md>",No student answer
2024-10-21T17:00:13Z,"lab3, other",79,How sensitive is the lab test harness?,"<p>Hi, I&#39;ve been very conservative about editing the lab notebooks in any way other than entering text in the &#39;answer&#39; blocks and the &#39;YOUR CODE HERE&#39; segments. But sometimes I&#39;d like to be able to modify the file a <em>little </em>bit more.</p>
<p></p>
<p>For example, I&#39;ve hit the colab usage limit, but in order to run the notebook locally, I&#39;ll need to edit the (rather dangerous) setup block. Will this sort of thing cause any kind of auto-grading to fail? Will it cost me points?</p>
<p></p>
<p>Similarly, when &#34;exploring&#34; in the first question on lab 3, it might be nice to write some helper functions and make a plot or two. But I have the same concern there: will it violate some contract about the notebook looking a certain way?</p>
<p></p>
<p>Thanks!</p>","<md>Hi there,

It is allowed to modify the setup block to enable safer local debugging. We will manually check your solutions so no need to worry about failing to pass auto-grading. You are allowed to add any code that generates plots to lab 3. 

Best,

Haotian</md>",No student answer
2024-10-20T19:36:21Z,other,78,Lecture 12 recording,I don&#39;t think the link for recording 12 is working. Can that please be fixed?,No instructor answer,No student answer
2024-10-20T19:35:17Z,lab3,77,Lab 3 Question 9,How should I go about finding the paramaters? I have tried over 50 different combinations and nothing made it to 92.5% accuracy. Do you have any advice?,<md>It might be helpful to encourage explorations during search.</md>,It is very likely that the randomness in training the accuracy predictor neural network (e.g. random initialization of weights) is behind the variation in the experiences of different students. I am personally under the camp of spending hours to get something that barely hit 92.5% and was annoyed to see that my results differed greatly upon re-running the notebook!
2024-10-20T17:34:06Z,lab3,76,Lab 3 Q2,Are we allowed to use thop.profile? We installed thop but never imported it it seems.,"<md>Hi there,

It is unnecessary to call thop. We have a helper function `count_net_flops`.

Best,

Haotian</md>",No student answer
2024-10-19T22:20:53Z,lab3,75,Lab 3 Erases Everything From My Server,"<p>Greetings,</p>
<p></p>
<p>I&#39;ve always been running my homework on my server at the home directory. This line hidden in the notebook force removes everything from my server... My research, unfinished projects, homeworks... : (</p>
<p></p>
<p></p>
<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Flmcz3bnbyuq15z%2F696ebd080ef40697e9139d572737c8f0a2f9a8324ab4a6337a8f135a73a6c1cf%2FScreenshot_2024-10-19_at_6.20.16_PM.png"" alt=""Screenshot_2024-10-19_at_6.20.16_PM.pngNaN"" /></p>","<md>Hi there,

This is very unfortunate. We apologize that we did not anticipate directly running lab3.ipynb directly under the home folder. We have commented out these two lines of code in the latest lab3.ipynb.

Best,

Haotian</md>",No student answer
2024-10-18T17:31:59Z,lab3,74,"Lab 3, Question 9","The parameters given for question 9 seem to already satisfy the accuracy constraints. Not sure if I&#39;m missing something, are we supposed to continue to find other parameters that also would work?","<md>Hi there,

The code may have some randomness. You may achieve good results with default parameters. Please try varying different parameters and see what is the impact on the final results. We are expecting some discussions in this part to grant full score to the bonus question.

Best,

Haotian</md>",No student answer
2024-10-18T16:56:28Z,lab3,73,"Lab 3, Question 10",Is this a theoretical question that we should hypothesize an answer to based on what we have seen so far about computational budgets or should we have a cell in our notebook showing different experiments to lead to a more quantitative answer?,<md>You do not need to have a cell running and find the actual network. The question can be answered without running search.</md>,No student answer
2024-10-17T17:04:07Z,lab3,72,"Lab 3, Question 1","I&#39;m confused how to change the input resolution, as suggested in this problem. Is this some parameter I should pass into sample_active_subnet? I can&#39;t find the documentation for this function anywhere.","<md>Hi there,

We have an argument called `image_size` in `ofa_network.sample_active_subnet`. Feel free to give it a try.

Best,

Haotian</md>",No student answer
2024-10-16T14:29:09Z,other,70,"Loop Reordering, Lecture 11, Slide 12","For Lecture 11, slide 12, would we still get the same speed up if we did not save the intermediate result Aik = A[i][k] since we would have to retrieve this each time? Is this a fair comparison since we use this extra buffer?","<md>I think you will still expect significant speedup. 

The strided memory access pattern to B[k][j] is incontiguous, and thus not hardware friendly in the baseline implementation. Even if we do not manually cache A[i][k], the loop reordered implementation resolves this issue and should be able to bring about significant speedup. 

By the way, since A[i][k] has good time locality (i and k will not change in the innermost loop, where j changes), it can also be cached automatically.</md>",No student answer
2024-10-16T01:48:16Z,lab3,69,"Lab 3, Question 10","For this question, can we assume our input resolution is fixed? If so, should we use 96?","<md>Hi there,

We assume that the input resolution will be chosen from: 
```python
image_size_list = [96, 112, 128, 144, 160]
```

Best,

Haotian</md>",No student answer
2024-10-15T16:11:17Z,lab3,68,Lab 3 Question 4,"I am working on Quesion 4, writing the training loop. The hints seem to imply that we don&#39;t need an optimizer.step() piece in the loop or optimizer.zero_grad() before calculating the gradients. Is that true and if so why don&#39;t we need it? Never mind I think you need it but I don&#39;t know how to delete a post.","<md>Actually you will need that. Backward pass means ""backward pass + parameter update"".</md>",No student answer
2024-10-15T03:24:21Z,logistics,67,Missing links for lecture 10 and 11,"Hi, I&#39;ve noticed that we are missing the lecture recordings for lectures 10 and 11. Can this be uploaded? Thanks","<p>Hi,</p>
<p></p>
<p>The recordings of lecture 10 and 11 have been published to youtube. You could check it out on our website <a href=""https://efficientml.ai/"" target=""_blank"" rel=""noopener noreferrer"">https://efficientml.ai/</a> or directly on our youtube channel: <a href=""https://www.youtube.com/watch?v=ePytVBpjxJA&amp;list=PL80kAHvQbh-qGtNc54A6KW4i4bkTPjiRF&amp;index=18"" target=""_blank"" rel=""noopener noreferrer"">https://www.youtube.com/watch?v=ePytVBpjxJA&amp;list=PL80kAHvQbh-qGtNc54A6KW4i4bkTPjiRF&amp;index=18</a></p>
<p></p>
<p>Regards,</p>
<p>Zhekai</p>",No student answer
2024-10-13T19:01:32Z,lab3,63,Lab 3 Question 8 Writeup,"<p>Hello!</p>
<p></p>
<p>Looks like there isn’t a spot to describe our findings in question 8. Should we create a new cell to describe our findings or is just tuning the parameters sufficient? </p>","<md>Yes, please add a new cell to describe your findings, particularly the choice of hyper-parameters.</md>",No student answer
2024-10-12T13:58:43Z,lab3,62,Is Lab 3 Finished?,"<p>in the header of the lab, it says:</p>
<p><br />“</p>
<ul><li>For architecture search, there are <strong><em>?</em></strong>questions in total.”</li></ul>
<p>Is the posted lab complete?</p>",<md>Sorry for the confusion. There are 6 questions for the architecture search section. The lab is finalized.</md>,No student answer
2024-10-10T20:25:43Z,logistics,61,Can the sound please be increased in the lecture recordings,Can barely hear even when I play them on max volume :(,"<md>Hi there,

Sorry for the delayed response. Will it be possible to point out which specific lecture has too low volume? We will try increasing the volume in some of the recordings according to your advice.

Best,

Haotian</md>",No student answer
2024-10-09T01:04:00Z,logistics,58,Participation Grade,<md>Are the lab feedback forms part of the participation grade/bonus?</md>,No instructor answer,"On the website: &#34;We appreciate everyone being actively involved in the class! Around the middle and end of the semester, we will send out a survey to help us understand how the course is going, and how we can improve. Completing it is worth 4% in total.&#34;"
2024-10-08T15:45:02Z,lab2,57,quantized_linear bias is wrong?,"Hi - for some reason my bias is wrong for Q7... 

mine: 
tensor([-1,  0, -3, -1, -3,  0,  2, -4], dtype=torch.int32)

what I should get: 
tensor([ 2, -1,  2,  1,  2,  2, -1, -1], dtype=torch.int32)

I pass the linear_quantize() test with:    

############### YOUR CODE STARTS HERE ###############
    # Step 1: scale the fp_tensor
    scaled_tensor = fp_tensor*1/scale
    # Step 2: round the floating value to integer value
    rounded_tensor = torch.round(scaled_tensor).to(torch.int8)
    ############### YOUR CODE ENDS HERE #################

    rounded_tensor = rounded_tensor.to(dtype)

    ############### YOUR CODE STARTS HERE ###############
    # Step 3: shift the rounded_tensor to make zero_point 0
    shifted_tensor = rounded_tensor&#43;zero_point
    ############### YOUR CODE ENDS HERE #################


and for calculating the bias scale in linear_quantize_bias...() 
    bias_scale = input_scale * weight_scale


and for get_quantization_scale_and_zero_point(): 
   ############### YOUR CODE STARTS HERE ###############
    # hint: one line of code for calculating scale
    scale = abs(fp_max)/2**(bitwidth-1)
    # hint: one line of code for calculating zero_point
    zero_point = int(round(quantized_min-fp_min/scale))


I&#39;ve spent a good amount of time trying to debug to no avail, so any tips would be appreciated. 
Thanks!",No instructor answer,"<md>When debugging my code, my issue was in 
````
get_quantization_scale_and_zero_point
````

I recommend implementing their formulas *exactly* from question(s) above and using *all values given to you* explicitly instead of computing them yourself.

Hope that ends up fixing your bug :)</md>"
2024-10-08T00:34:35Z,lab2,56,Dosent this throw away all the benefits we want,"<md>![image.png](/redirect/s3?bucket=uploads&prefix=paste%2Fkekfqxttgoz7bd%2F79b6b103834bdab3a79046f4283b05d012687d995aae2ef3fa3b253621919bae%2Fimage.png)

The GPU one seems especially sus.</md>",No instructor answer,No student answer
2024-10-08T00:24:16Z,other,55,[Lecture 5 Question] How to compute quantization for X and Y?,"<md>![image.png](/redirect/s3?bucket=uploads&prefix=paste%2Fkekfqxttgoz7bd%2Ff9367498595a767789505543765d34d044e20f186d3965135c13f03c735247d8%2Fimage.png)

Curious how we compute the shift and scale for X and Y, since they are not fixed. Is it based on some statistics from the training dataset?

What happens when we go OOD?</md>",No instructor answer,No student answer
2024-10-08T00:13:10Z,project,54,Project Logistics,When will the list of suggested projects be released? How will group formation work?,No instructor answer,No student answer
2024-10-07T00:03:37Z,lab2,52,Why is weight scale not a scalar in the lab?,"<md>In lab 2, I see this comment as a hint. Why is weight scale not a scalar? why does it have a different value for each output channel? I remember from lecture that it was described as having a single scaling factor for the entire weight matrix.
```
the shape of weight scale is [oc, 1, 1, 1] while the shape of output is [batch_size, oc]
```</md>",It&#39;s per-channel quantization. Please refer to P15 of Lec 6.,No student answer
2024-10-06T20:56:06Z,lab2,51,Advice Debugging Conv Quantization 10% accuracy,"<p>Hello! I was wondering if I could get some advice on how to best debug question 9.1 resulting in 10% accuracy. </p>
<p></p>
<p>I suspect it must either be an issue with question 9.1 or question 8 given that everything before passed. I verified that the output of 9.1 gives integers between -128 and 127 (a good mix of positive and negative numbers, the mapping matches my expectation). Question 8 is pretty similar to question 7 (which passed the test); I tried a few variants in case there was something unexpected but couldn’t yet find anything. </p>
<p></p>
<p>I’m messing around with some visualizations to better debug, but I’m curious what sort of suggestions you have for debugging? Thanks so much!</p>","<p>Please check if you have overflow problems in Q4: linear_quantize(). </p>
<p></p>
<p>The 𝑟=𝑆(𝑞−𝑍) quantization does not guarantee that 𝑆𝑞 stays in the range of target precision (e.g., INT8)</p>",No student answer
2024-10-06T17:44:51Z,lab2,49,Quantizing Conv2D,"<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fktb0nxlly1k4nx%2F2ba6c5f03077ace4ee60137d9e05d691291072b69b9d840ded48cbd139a0eb9d%2Fimage.png"" alt=""image.pngNaN"" /></p>
<p>When I try to run the final test, it fails with this error, but i&#39;m not sure what I messed up in the conv2D step. :(</p>",Looks like the implementation here is correct. You may need to check your input args for quantized_conv2d(),No student answer
2024-10-06T17:23:01Z,lab2,48,Retraining 2 bit k means has too low accuracy,"<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fktb0nxlly1k4nx%2F131e86e5833cf43fd50124019b41166209070a98acfdb852eb63407196e38945%2Fimage.png"" alt=""image.pngNaN"" /></p>
<p></p>
<p>Is this good enough? I don&#39;t expect as good as original, but the question wasn&#39;t clear what accuracy we should be getting to.</p>","<p>90%&#43; accuracy seems to be good.</p>
<p></p>",No student answer
2024-10-05T17:06:58Z,lab2,47,Updating param as well as codebook,"<p>Edit: Oops, misread the code, nvm!</p>
<p></p>
<p>I&#39;m confused about what appears to be an inconsistency between <kbd>k_means_quantize</kbd> and <kbd>update_codebook</kbd>. Whereas <kbd>k_means_quantize</kbd> both computes the codebook, and quantizes the original fp32 matrix, the code given for <kbd>update_codebook</kbd> suggests that we simply update the codebook without actually updating the fp32 matrix passed in:<br /><br /></p>
<pre>
def update_codebook(fp32_tensor: torch.Tensor, codebook: Codebook):
    &#34;&#34;&#34;
    update the centroids in the codebook using updated fp32_tensor
    :param fp32_tensor: [torch.(cuda.)Tensor]
    :param codebook: [Codebook] (the cluster centroids, the cluster label tensor)
    &#34;&#34;&#34;
    n_clusters = codebook.centroids.numel()
    fp32_tensor = fp32_tensor.view(-1)
    for k in range(n_clusters):
    ############### YOUR CODE STARTS HERE ###############
        # hint: one line of code
        codebook.centroids[k] = ...
    ############### YOUR CODE ENDS HERE #################</pre>
<p>This seems odd because when we fine-tune the quantized model, we call <kbd>update_codebook </kbd>via the callback, which updates the codebook but does not re-quantize the model:</p>
<div>
<pre>
while accuracy_drop &gt; accuracy_drop_threshold and epoch &gt; 0:
	train(model, dataloader[&#39;train&#39;], criterion, optimizer, scheduler, callbacks=[lambda: quantizer.apply(model, update_centroids=True)])
	model_accuracy = evaluate(model, dataloader[&#39;test&#39;])
	is_best = model_accuracy &gt; best_accuracy
	best_accuracy = max(model_accuracy, best_accuracy)
	print(f&#39; Epoch {num_finetune_epochs-epoch} Accuracy {model_accuracy:.2f}% / Best Accuracy: {best_accuracy:.2f}%&#39;)
	accuracy_drop = fp32_model_accuracy - best_accuracy
	epoch -= 1</pre>
<p>The conclusion seems to be that we&#39;re not actually evaluating the resulting quantized model after the codebook is reapplied to the model, and are effectively just fine tuning a non-quantized model initialized to the original quantized model. (I could totally be missing something though). One small fix would to just have update_codebook also update the param passed in via:<br /><br /></p>
</div>
<pre>
def update_codebook(fp32_tensor: torch.Tensor, codebook: Codebook):
    n_clusters = codebook.centroids.numel()
    fp32_tensor = fp32_tensor.view(-1)
    for k in range(n_clusters):
      codebook.centroids[k] = ...
    ### NEW ### 
    quantized_tensor = codebook.centroids[codebook.labels].view_as(fp32_tensor)
    fp32_tensor.set_(quantized_tensor.view_as(fp32_tensor))
   ### END NEW ###

</pre>
<p>We might even just stick it in <kbd>KMeansQuantizer.appl</kbd>y as these two lines are used in both <kbd>k_means_quantize</kbd> and <kbd>update_codebook</kbd>. Apologies if I&#39;m overlooking something. Thanks in advance for any clarification!</p>","<md>Hi,

In update\_codebook(), we don’t quantize the input fp32\_tensor. The fp32\_tensor (param) is updated here (in k\_means\_quantize):

```python
class KMeansQuantizer:
    def __init__(self, model : nn.Module, bitwidth=4):
        self.codebook = KMeansQuantizer.quantize(model, bitwidth)

    @torch.no_grad()
    def apply(self, model, update_centroids):
        for name, param in model.named_parameters():
            if name in self.codebook:
                if update_centroids:
                    update_codebook(param, codebook=self.codebook[name])
                self.codebook[name] = k_means_quantize(
                    param, codebook=self.codebook[name])
```</md>",No student answer
2024-10-01T21:44:58Z,lab2,45,Q2.1 Test failure with bitwidth=4,"<p>Q2.1 asks how many unique colors do we get with 4-bit k-means quantization. I assume we expect 16.</p>
<p>However, when I edit the test_k_means_quantize with bitwidth=4. I only got 13 and the test failed. (See screenshots below).</p>
<p>Moreover, when I reran it from a fresh state, I got different results (see the second screenshot). </p>
<p>Is this behavior expected?</p>
<p></p>
<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fl72q8aoli6c3lh%2F5eba97bfba2660562716c5dc924dc66b2adb6992e32a93c854978341e966e93b%2Fimage.png"" alt=""image.pngNaN"" width=""729"" height=""264"" /></p>
<p></p>
<p></p>
<p><img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fl72q8aoli6c3lh%2F9523d5124c28083de33a7668d9ee27538c05da45055336f68d28fb53d36a381d%2Fimage.png"" alt=""image.pngNaN"" width=""530"" height=""191"" /></p>
<p></p>","<p>There are some randomness in the k-means quantization. Since there is only 25 unique elements in the original tensor, it&#39;s possible that some centroids do not get any elements after k-means quantization. 16 is the largest number of unique values (centroids) after k-means quantization.</p>
<p> </p>",No student answer
2024-09-30T00:29:56Z,other,40,"Lecture 7 slides, Cumulative probability","In Lecture 7 slide 58, what is cumulative probability? Is that some measure of memory?",No instructor answer,"<md>The point $$(x, y)$$ on a curve means that using that search space, the resulting model has a probability $$y$$ of achieving $$\leq x$$ FLOPs under the memory constraint. Having more FLOPs is better, so we prefer the curve to be shifted as far right as possible.</md>"
2024-09-27T21:52:57Z,lab3,39,forward() vs calling a model directly,"<p>Basic question about PyTorch models:</p>
<p></p>
<p>What is the difference between calling model.forward(x) and model(x)? Should I ever directly call the forward function?</p>","<md>Hi,

In PyTorch, calling model.forward(x) and model(x) are different:

- ``model.forward(x)`` directly calls the forward method of the class - which usually defines how the input data is processed.
- While ``model(x)`` will internally call the ``__call__`` method of the model, which does additional things like managing hooks.
- By using ``model(x)``, PyTorch handles hooks (like forward and backward hooks) that you may have registered. On the other hand, calling ``model.forward(x)`` will bypass hooks and only perform what is defined in the ``forward()`` method.
- You may refer to the implementation [here](https://github.com/pytorch/pytorch/blob/main/torch/nn/modules/module.py#L1740) for more details.</md>",No student answer
2024-09-27T18:48:41Z,lab2,38,"Is it just me, or is this not 4 colors?","<p></p>
<p>For question 2, I am a bit confused because there seem to be only 3 colors to me. Should we pretend we have a tensor with all different values instead of the dummy provided by the test? <img src=""/redirect/s3?bucket=uploads&amp;prefix=paste%2Fl7rvlloj5sk2hg%2Fc9f78027ff8ee799eb654314cac558de6b4e13303c6b8fde95fc3cdc8df87387%2Fimage.png"" alt=""image.pngNaN"" /></p>",No instructor answer,"<md>The line at the top of the image says ""num unique values after k-means quantization: 3"" so you should indeed expect only 3 colors</md>"
2024-09-26T12:52:17Z,lab1,37,Question 8.2 latency reduction is higher,"<p>Hi, I understand what question 8.2 is asking, but actually my observed latency reduction is higher than the computation reduction:</p>
<p></p>
<p style=""padding-left:40px"">                        Original Pruned Reduction Ratio</p>
<p style=""padding-left:40px"">Latency (ms) 27.0        12.6      2.1</p>
<p style=""padding-left:40px"">MACs (M)       606        305      2.0</p>
<p style=""padding-left:40px""></p>
<p dir=""ltr"">Should this change how we answer this question? Or should we answer as if the latency reduction is smaller?</p>","<md>Hi there,

As answered by the student, the colab CPU runtime might be unstable since it is a shared environment. Increasing the number of measurements and averaging the results should help. 

Best,

Haotian</md>",I saw the same thing. Try running it a few times: you&#39;ll notice that the distribution of latencies isn&#39;t <em>that </em>narrow! The setup for this question could probably benefit from a bit of averaging.
2024-09-26T01:38:39Z,"lab3, lab2",36,ReLU with quantization,"I realize that using a ReLU with quantization is wasteful as we squeeze half the values to 0. However, without the ReLU, what non-linearity do we use? Specifically in the homework, I do not see another non-linear function?","<md>Hi, this is indeed Bonus Question (Question 9.2) in Lab 2.</md>",No student answer
2024-09-25T01:37:17Z,"logistics, lab1",35,Saving cell outputs,"<p>Hi!</p>
<p>I see that some of my cell outputs are being saved automatically, but sometimes the images are not saved in the notebook on Google Collab. </p>
<p></p>
<p>Does anyone know of any hidden setting toggles we need to do to get it all saved? </p>
<p></p>
<p>Thank you!</p>","<md>Yes, on top of the existing author, I recommend manually saving the Notebook occasionally (for example, using Command+S on MacOS) during the process.</md>","<p>Colab in general can be pretty glitchy in my experience. I think the autosave by default saves the images but maybe it skips some if the image is served and rendered first for the client and later for the autosave pipeline. You can try upping the frequency of the autosave. E.g. running</p>
<div><kbd>%autosave 60<br /></kbd></div>
<div>in a cell sets the autosave interval to 60 seconds.</div>
<p></p>"
2024-09-24T22:07:16Z,lab1,33,question 6,"<p>I&#39;m not sure I understand how to prune the channels of the input layer.</p>
<p>I thought it&#39;d be as simple as</p>
<div></div>
<div>REMOVED CODE</div>
<div></div>
<div>
<div>but I get this error:</div>
</div>
<div>
<pre>
RuntimeError: Given groups=1, weight of size [90, 64, 3, 3], expected input[1, 45, 32, 32] to have 64 channels, but got 45 channels instead</pre>
</div>
<p>I&#39;m not sure how i&#39;m supposed to implement this in 1 line.</p>",No instructor answer,Did you remember to set the weights of next_conv to the pruned version?
2024-09-24T19:57:21Z,other,32,Number of Activations,"<p>In the slides of lecture 2 (p.62-65), there are several plots proving that #activation is the bottleneck, rather than #parameter. May I ask why is that the case?</p>
<p><br />I thought every activation function is just computed from the logits, which sum each synapse’s contribution. If each synapse has one weight, how is #activation the bottleneck? Thank you.</p>","<p>In p.62-63, the take-away is that while MobileNet saves a lot of params (compared to ResNet) with a decent accuracy, the #activation in MobileNet is not well optimized. Therefore, optimizing the peak activation memory is also very important, especially in training scenarios (p.65).</p>
<p></p>
<p>#activation can be much larger than #params. For example, considering image inputs and convolution neural nets, each pixel will be represented as a feature vector with the dimension of channel size (ignoring up-sample &amp; down-sample here for the sake of simplicity). Moreover, for batched inputs, the #activation is multiplied by batch size while the #params remains the same.  </p>",No student answer
2024-09-23T17:26:28Z,lab1,30,Lab1 Question 5,"<p>For Q5 in lab1, it says &#34;Please make sure that after pruning, the sparse model is 25% of the size of the dense model, and validation accuracy is higher than 92.5 after finetuning.&#34;</p>
<p></p>
<p>Are these values okay (not necessarily equal to 25% sparsity exactly)?</p>
<div>
<div>
<pre>
Sparse model has size=8.61 MiB = 24.45% of dense model size
</pre>
</div>
</div>
<div></div>
<div>
<div>
<pre>
Sparse model has accuracy=92.91% after fintuning</pre>
</div>
</div>","<md>Hi, these numbers are OK.</md>",No student answer
2024-09-20T16:14:42Z,other,28,When will the video be out for Thursday&#39;s lecture?,Title,"<p>Hi,</p>
<p></p>
<p>The video has been released.</p>",No student answer
2024-09-18T06:13:53Z,lab1,25,Cannot connect to GPU,"<p>You cannot currently connect to a GPU due to usage limits in Colab.</p>
<p>Any work around to get more time on GPU without paying?</p>
<p></p>
<p>Thank you!</p>",No instructor answer,"<p>You have to wait or use a different google account, imo both options are bad.</p>
<p>I just downloaded the colab and installed dependencies on a new conda environment, set the kernel on vscode to point to that.</p>
<p>Now I can leverage my own GPU with pytorch, making it a lot easier.</p>
<p></p>
<p><a href=""https://pytorch.org/get-started/locally/"" target=""_blank"" rel=""noopener noreferrer"">https://pytorch.org/get-started/locally/</a><br />you can just copy the pip command from here as dependencies.</p>"
2024-09-17T20:37:39Z,other,23,Lab 0 is indeed worth 0 points and does not need to be submitted right?,"<p>Just asking because it says that it is due on the TinyML website.</p>
<p></p>
<p>Thanks!</p>","<md>Yes, Lab 0 will not be graded.</md>",No student answer
2024-09-14T16:09:55Z,lab1,21,Pset upload,"For submitting the labs, do we just need to upload the ipynb file with all cells run?","<md>Hi,

Yes, you only need to upload the .ipynb file with all cells run and questions answered for Lab 0 - 4.</md>",No student answer
2024-09-12T14:14:01Z,other,18,Latency Question,"L2 states that Latency = max($$T_{computation}, T_{memory}$$). Shouldn&#39;t this be Latency = $$T_{computation} + T_{memory}$$, since for every forward pass we are both fetching activations from memory AND computing?","<md>Hi there,

We assume that computation and memory access are overlapped during execution. This is similar to pipelining in CPU processors, where elements for the next computation cycle are prefetched while the current cycle is being performed. In this case, the latency will be determined by the longer of the two: memory access time or computation time.

Best, Haotian</md>",No student answer
2024-09-10T20:44:32Z,lab1,14,Different Languages/Release Early?,"<p>Two questions:</p>
<p>1. Are we able to use a low-level language other than C/C&#43;&#43; for the labs? For example, I&#39;m hoping to get better at Rust, which AFAIK is pretty integrable with C/C&#43;&#43; toolchains, so it would be nice to be able to use Rust and/or mix/match.</p>
<p>2. Any chance it is possible to release the labs earlier? I have some research deadlines at certain times and it could be extremely helpful to front-load some of the labs. It could also facilitate 1 if I need to write some shim layers.</p>","<md>Hi there,

Regarding your questions, 

1. We will be able to use C++ in lab5. You are welcomed to use any programming languages in the final project as well.

2. Yes, we have already released all the labs in our course website: https://hanlab.mit.edu/courses/2024-fall-65940. 


Best,
Haotian</md>",No student answer
2024-09-10T19:53:01Z,logistics,13,Slides before class,Can we have the slides available on the website before the lecture so that we can take notes on the slides? Thanks!,"<md>Hi, we will upload the slides and make them available before the lecture if possible.</md>",No student answer
2024-09-06T17:37:16Z,logistics,11,What time are psets due,11:59 pm hopefully ;),"<md>Hi, all PSets are due 11:59 PM EST.</md>",No student answer
2024-09-05T21:29:44Z,logistics,8,Prereq Waiver Form,"<md>Dear Instructors,

I can't find the link to the prereq waiver form (mentioned in lecture) on the course website. The posted slides seem to be from last year's lecture. Can you provide us with the link here?

Thanks.</md>","<md>Hi,

You can find the prerequisite petition form [here](https://docs.google.com/forms/d/1gkESVTUXDmW-skKDJFELq3OTKdHo2Z_AOdPVv0vOwvk).</md>",No student answer
2024-08-22T15:19:07Z,other,6,Welcome to Piazza!,"Welcome to 6.5940 TinyML and Efficient Deep Learning Computing!<br /><br />Course announcements will be made here at Piazza, but file postings (such as lecture notes) and the hub website for all information about the course are at the course website https://efficientml.ai.<br /><br />Here is some key course information.<br />Time: Tuesday/Thursday 3:35-5:00pm Eastern Time<br />Location: 34-101<br />Office Hour: Thursday 5:00-6:00 pm Eastern Time, 38-344 Meeting Room<br />Contact: For external inquiries, personal matters, or emergencies, you can email us at efficientml-staff [at] mit.edu.<br />Prerequisites: 6.191 Computation Structures and 6.390 Intro to Machine Learning. Students who don&#39;t full-fill the prerequisites will be de-registered in the second week of class.",No instructor answer,No student answer
2024-08-22T15:13:59Z,,1,Welcome to Piazza!,"
Piazza is a Q&A platform designed to get you great answers from classmates and instructors fast. We've put together this list of tips you might find handy as you get started:

<ol style=""margin:0;padding:0;list-style-position:inside;""> <li style=""margin:0;padding:0""><strong>Ask questions!</strong>

The best way to get answers is to ask questions! Ask questions on Piazza rather than emailing your teaching staff so everyone can benefit from the response (and so you can get answers from classmates who are up as late as you are).

</li><li style=""margin:0;padding:0""><strong>Edit questions and answers wiki-style.</strong>

Think of Piazza as a Q&A wiki for your class. Every question has just a single <strong>students' answer</strong> that students can edit collectively (and a single <strong>instructors’ answer</strong> for instructors).

</li><li style=""margin:0;padding:0""> <strong>Add a followup to comment or ask further questions.</strong>

To comment on or ask further questions about a post, start a <strong>followup discussion</strong>. Mark it resolved when the issue has been addressed, and add any relevant information back into the Q&A above.

</li><li style=""margin:0;padding:0""> <strong>Go anonymous.</strong>

Shy? No problem. You can always opt to post or edit anonymously.

</li><li style=""margin:0;padding:0""> <strong>Tag your posts.</strong>

It's far more convenient to find all posts about your Homework 3 or Midterm 1 when the posts are tagged. Type a “#” before a key word to tag. Click a blue tag in a post or the question feed to filter for all posts that share that tag.

</li><li style=""margin:0;padding:0""> <strong>Format code and equations.</strong>

Adding a code snippet? Click the <strong>pre</strong> or <strong>tt</strong> button in the question editor to add pre-formatted or inline teletype text. 
Mathematical equation? Click the <strong>Fx</strong> button to access the LaTeX editor to build a nicely formatted equation.

</li><li style=""margin:0;padding:0""> <strong>View and download class details and resources.</strong> </li></ol>

Click the <strong>Course Page</strong> button in your top bar to access the class syllabus, staff contact information, office hours details, and course resources—all in one place!


Contact the Piazza Team anytime with questions or comments at <strong>team@piazza.com</strong>. We love feedback!",No instructor answer,No student answer
